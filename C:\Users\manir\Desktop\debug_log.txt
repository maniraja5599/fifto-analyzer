[2025-08-09 03:12:25] === Generate Analysis View Called ===
[2025-08-09 03:12:25] Request method: POST
[2025-08-09 03:12:25] Form data received:
[2025-08-09 03:12:25]   Instrument: NIFTY
[2025-08-09 03:12:25]   Calculation Type: Weekly
[2025-08-09 03:12:25]   Expiry: 14-Aug-2025
[2025-08-09 03:12:25] Calling utils.generate_analysis()...
[2025-08-09 03:12:25] UTILS: === generate_analysis() called ===
[2025-08-09 03:12:25] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 03:12:25] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 03:12:25] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 03:12:26] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 03:12:28] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 03:12:28] UTILS: 📊 Using zone-based strike selection
[2025-08-09 03:12:28] UTILS: 📊 Zone-based strikes:
[2025-08-09 03:12:28] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 03:12:28] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 03:12:28] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 03:12:28] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 03:12:28] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 03:12:28] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 03:12:29] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 03:12:29] UTILS: Generated files: summary_59d0b4ddc8434b47b1e351f8b8d26897.png, static/payoff_88f04312228d448abd3bcb2fee742468.png
[2025-08-09 03:12:29] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 03:12:29] ✅ Analysis successful - data saved to session
[2025-08-09 09:06:21] === Generate Analysis View Called ===
[2025-08-09 09:06:21] Request method: POST
[2025-08-09 09:06:21] Form data received:
[2025-08-09 09:06:21]   Instrument: NIFTY
[2025-08-09 09:06:21]   Calculation Type: Monthly
[2025-08-09 09:06:21]   Expiry: 21-Aug-2025
[2025-08-09 09:06:21] Calling utils.generate_analysis()...
[2025-08-09 09:06:21] UTILS: === generate_analysis() called ===
[2025-08-09 09:06:21] UTILS: Parameters: instrument=NIFTY, calc_type=Monthly, expiry=21-Aug-2025
[2025-08-09 09:06:21] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 09:06:21] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 09:06:22] UTILS: ✅ Zones calculated - Supply: ₹25448.2, Demand: ₹24021.6
[2025-08-09 09:06:24] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-09 09:06:24] UTILS: 📊 Using zone-based strike selection
[2025-08-09 09:06:24] UTILS: 📊 Zone-based strikes:
[2025-08-09 09:06:24] UTILS:    CE strikes (from supply ₹25448.2): [25450, 25500, 25550]
[2025-08-09 09:06:24] UTILS:    PE strikes (from demand ₹24021.6): [24000, 23950, 23900]
[2025-08-09 09:06:24] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 09:06:24] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      25450      7.70      24000     62.00           ₹4200
1   Mid Reward      25500      6.25      23950     55.25           ₹3700
2   Low Reward      25550      5.80      23900     47.80           ₹3200
[2025-08-09 09:06:24] UTILS: 📊 CE Prices found: 84 items
[2025-08-09 09:06:24] UTILS: 📊 PE Prices found: 84 items
[2025-08-09 09:06:24] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 09:06:24] UTILS: Generated files: summary_f1c721e21a154fc2b469d7e333bde721.png, static/payoff_8a1f911aae5644089d5fcd08c6adb615.png
[2025-08-09 09:06:24] Analysis result: <class 'dict'>, Status: ✅ Monthly analysis completed with supply/demand zones (Supply: ₹25448, Demand: ₹24022)
[2025-08-09 09:06:24] ✅ Analysis successful - data saved to session
[2025-08-09 10:19:27] UTILS: === generate_analysis() called ===
[2025-08-09 10:19:27] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 10:19:27] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 10:19:27] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 10:19:31] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 10:19:34] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 10:19:34] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:19:34] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:19:34] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 10:19:34] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 10:19:34] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:19:34] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 10:19:34] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 10:19:34] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 10:19:34] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 10:19:34] UTILS: Generated files: summary_982082cce6a3490388f61292c1e19e73.png, static/payoff_6caeb7d41cff4d32824cce91e55b560f.png
[2025-08-09 10:19:34] UTILS: === generate_analysis() called ===
[2025-08-09 10:19:34] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-09 10:19:34] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 10:19:34] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 10:19:34] UTILS: ✅ Zones calculated - Supply: ₹57501.5, Demand: ₹54292.8
[2025-08-09 10:19:38] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 10:19:38] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:19:38] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:19:38] UTILS:    CE strikes (from supply ₹57501.5): [57600, 57700, 57800]
[2025-08-09 10:19:38] UTILS:    PE strikes (from demand ₹54292.8): [54200, 54100, 54000]
[2025-08-09 10:19:38] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:19:38] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      57600       0.0      54200       0.0              ₹0
1   Mid Reward      57700       0.0      54100       0.0              ₹0
2   Low Reward      57800       0.0      54000       0.0              ₹0
[2025-08-09 10:19:38] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 10:19:38] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 10:19:38] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 10:19:38] UTILS: Generated files: summary_8d9eed34e6374bc896d7f298e2ad105b.png, static/payoff_c574b0fbb87c4347b9a9de734fdb071b.png
[2025-08-09 10:19:38] UTILS: === generate_analysis() called ===
[2025-08-09 10:19:38] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 10:19:38] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 10:19:38] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 10:19:38] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 10:19:40] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 10:19:40] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:19:40] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:19:40] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 10:19:40] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 10:19:40] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:19:40] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 10:19:40] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 10:19:40] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 10:19:40] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 10:19:40] UTILS: Generated files: summary_dc0bff993a2042c2bc18034b0ddfc5ad.png, static/payoff_97a17eb1de7c43d1aaca8b1b4d742017.png
[2025-08-09 10:19:40] UTILS: === generate_analysis() called ===
[2025-08-09 10:19:40] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-09 10:19:40] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 10:19:40] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 10:19:40] UTILS: ✅ Zones calculated - Supply: ₹57501.5, Demand: ₹54292.8
[2025-08-09 10:19:42] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 10:19:42] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:19:42] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:19:42] UTILS:    CE strikes (from supply ₹57501.5): [57600, 57700, 57800]
[2025-08-09 10:19:42] UTILS:    PE strikes (from demand ₹54292.8): [54200, 54100, 54000]
[2025-08-09 10:19:42] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:19:42] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      57600       0.0      54200       0.0              ₹0
1   Mid Reward      57700       0.0      54100       0.0              ₹0
2   Low Reward      57800       0.0      54000       0.0              ₹0
[2025-08-09 10:19:42] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 10:19:42] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 10:19:42] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 10:19:42] UTILS: Generated files: summary_9f63f695b63f4c849916c0b0dd2f70ce.png, static/payoff_0a9d08eb3d50462fa4881084ab49055f.png
[2025-08-09 10:19:43] UTILS: === generate_analysis() called ===
[2025-08-09 10:19:43] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 10:19:43] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 10:19:43] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 10:19:43] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 10:19:45] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 10:19:45] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:19:45] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:19:45] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 10:19:45] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 10:19:45] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:19:45] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 10:19:45] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 10:19:45] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 10:19:45] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 10:19:45] UTILS: Generated files: summary_1ded421803f0421781976540095c0800.png, static/payoff_0189dcf0f0c140e383bb11d73367d904.png
[2025-08-09 10:20:19] UTILS: === generate_analysis() called ===
[2025-08-09 10:20:19] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 10:20:19] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 10:20:19] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 10:20:19] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 10:20:21] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 10:20:21] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:20:21] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:20:21] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 10:20:21] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 10:20:21] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:20:21] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 10:20:21] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 10:20:21] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 10:20:22] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 10:20:22] UTILS: Generated files: summary_48c47af3986f41758c59a2be2a3f37c5.png, static/payoff_16e5a6d3810a4f65bc83df683b411b5e.png
[2025-08-09 10:23:00] UTILS: === generate_analysis() called ===
[2025-08-09 10:23:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 10:23:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 10:23:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 10:23:01] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 10:23:02] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 10:23:02] UTILS: 📊 Using zone-based strike selection
[2025-08-09 10:23:02] UTILS: 📊 Zone-based strikes:
[2025-08-09 10:23:02] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 10:23:02] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 10:23:02] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 10:23:02] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 10:23:02] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 10:23:02] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 10:23:03] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 10:23:03] UTILS: Generated files: summary_2ef0e0824e5f4407bd6011a0f00c125e.png, static/payoff_fd1ecbf88023463d92bf70e9e60f9110.png
[2025-08-09 12:29:48] === Generate Analysis View Called ===
[2025-08-09 12:29:48] Request method: POST
[2025-08-09 12:29:48] Form data received:
[2025-08-09 12:29:48]   Instrument: NIFTY
[2025-08-09 12:29:48]   Calculation Type: Weekly
[2025-08-09 12:29:48]   Expiry: 28-Aug-2025
[2025-08-09 12:29:48] Calling utils.generate_analysis()...
[2025-08-09 12:29:48] UTILS: === generate_analysis() called ===
[2025-08-09 12:29:48] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=28-Aug-2025
[2025-08-09 12:29:48] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 12:29:48] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 12:29:49] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 12:29:50] UTILS: 📊 Real API data - CE: 93, PE: 93 strikes
[2025-08-09 12:29:50] UTILS: 📊 Using zone-based strike selection
[2025-08-09 12:29:50] UTILS: 📊 Zone-based strikes:
[2025-08-09 12:29:50] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 12:29:50] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 12:29:50] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 12:29:50] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     87.05      24350     208.0          ₹17700
1   Mid Reward      24900     73.80      24300     186.3          ₹15600
2   Low Reward      24950     67.80      24250     169.9          ₹14250
[2025-08-09 12:29:50] UTILS: 📊 CE Prices found: 93 items
[2025-08-09 12:29:50] UTILS: 📊 PE Prices found: 93 items
[2025-08-09 12:29:50] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 12:29:50] UTILS: Generated files: summary_08141025a0da4782afc7b4fd203bc18a.png, static/payoff_19c22bdb03024ce29ed894cf47fe7e41.png
[2025-08-09 12:29:50] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 12:29:50] ✅ Analysis successful - data saved to session
[2025-08-09 12:38:00] UTILS: === generate_analysis() called ===
[2025-08-09 12:38:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 12:38:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 12:38:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 12:38:00] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 12:38:02] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 12:38:02] UTILS: 📊 Using zone-based strike selection
[2025-08-09 12:38:02] UTILS: 📊 Zone-based strikes:
[2025-08-09 12:38:02] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 12:38:02] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 12:38:02] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 12:38:02] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 12:38:02] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 12:38:02] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 12:38:02] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 12:38:02] UTILS: Generated files: summary_29e659dddf334a5cb4a9bf3dba95ad50.png, static/payoff_637ce34a8c194633a243b4bed82b1d46.png
[2025-08-09 13:09:00] UTILS: === generate_analysis() called ===
[2025-08-09 13:09:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 13:09:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 13:09:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 13:09:01] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 13:09:02] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 13:09:02] UTILS: 📊 Using zone-based strike selection
[2025-08-09 13:09:02] UTILS: 📊 Zone-based strikes:
[2025-08-09 13:09:02] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 13:09:02] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 13:09:02] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 13:09:02] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.65      24350     109.9           ₹7550
1   Mid Reward      24900     12.70      24300      89.5           ₹6150
2   Low Reward      24950     10.60      24250      72.7           ₹5000
[2025-08-09 13:09:02] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 13:09:02] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 13:09:03] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 13:09:03] UTILS: Generated files: summary_a1661bbeaf4644439ced65cca9481682.png, static/payoff_5dc5c5c720994d1cb1db53f5b2c2f76d.png
[2025-08-09 13:22:00] UTILS: === generate_analysis() called ===
[2025-08-09 13:22:00] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-09 13:22:00] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 13:22:00] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 13:22:00] UTILS: ✅ Zones calculated - Supply: ₹57501.5, Demand: ₹54292.8
[2025-08-09 13:22:03] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 13:22:03] UTILS: 📊 Using zone-based strike selection
[2025-08-09 13:22:03] UTILS: 📊 Zone-based strikes:
[2025-08-09 13:22:03] UTILS:    CE strikes (from supply ₹57501.5): [57600, 57700, 57800]
[2025-08-09 13:22:03] UTILS:    PE strikes (from demand ₹54292.8): [54200, 54100, 54000]
[2025-08-09 13:22:03] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 13:22:03] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      57600       0.0      54200       0.0              ₹0
1   Mid Reward      57700       0.0      54100       0.0              ₹0
2   Low Reward      57800       0.0      54000       0.0              ₹0
[2025-08-09 13:22:03] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 13:22:03] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 13:22:04] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 13:22:04] UTILS: Generated files: summary_43dfa613a58545f88c616962cd85333f.png, static/payoff_34799366dd204a30bf034372f92ef038.png
[2025-08-09 13:46:00] UTILS: === generate_analysis() called ===
[2025-08-09 13:46:00] UTILS: Parameters: instrument=NIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-09 13:46:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 13:46:00] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 13:46:03] UTILS: ✅ Zones calculated - Supply: ₹25448.2, Demand: ₹24021.6
[2025-08-09 13:46:05] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 13:46:05] UTILS: 📊 Using zone-based strike selection
[2025-08-09 13:46:05] UTILS: 📊 Zone-based strikes:
[2025-08-09 13:46:05] UTILS:    CE strikes (from supply ₹25448.2): [25450, 25500, 25550]
[2025-08-09 13:46:05] UTILS:    PE strikes (from demand ₹24021.6): [24000, 23950, 23900]
[2025-08-09 13:46:05] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 13:46:05] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      25450       0.0      24000       0.0              ₹0
1   Mid Reward      25500       0.0      23950       0.0              ₹0
2   Low Reward      25550       0.0      23900       0.0              ₹0
[2025-08-09 13:46:05] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 13:46:05] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 13:46:06] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 13:46:06] UTILS: Generated files: summary_95dcb7ed5dfd4fc6a3bea32b67bec900.png, static/payoff_ac26ded900be4042bffe274e49b7e49a.png
[2025-08-09 13:47:00] UTILS: === generate_analysis() called ===
[2025-08-09 13:47:00] UTILS: Parameters: instrument=NIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-09 13:47:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 13:47:00] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-09 13:47:00] UTILS: ✅ Zones calculated - Supply: ₹25448.2, Demand: ₹24021.6
[2025-08-09 13:47:02] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 13:47:02] UTILS: 📊 Using zone-based strike selection
[2025-08-09 13:47:02] UTILS: 📊 Zone-based strikes:
[2025-08-09 13:47:02] UTILS:    CE strikes (from supply ₹25448.2): [25450, 25500, 25550]
[2025-08-09 13:47:02] UTILS:    PE strikes (from demand ₹24021.6): [24000, 23950, 23900]
[2025-08-09 13:47:02] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 13:47:02] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      25450       0.0      24000       0.0              ₹0
1   Mid Reward      25500       0.0      23950       0.0              ₹0
2   Low Reward      25550       0.0      23900       0.0              ₹0
[2025-08-09 13:47:02] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 13:47:02] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 13:47:03] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 13:47:03] UTILS: Generated files: summary_2fa8710c9fad416db89e6fe2b116a404.png, static/payoff_eae8c2a3633c4d939a2b713702f0dd26.png
[2025-08-09 16:53:06] === Generate Analysis View Called ===
[2025-08-09 16:53:06] Request method: POST
[2025-08-09 16:53:06] Form data received:
[2025-08-09 16:53:06]   Instrument: NIFTY
[2025-08-09 16:53:06]   Calculation Type: Weekly
[2025-08-09 16:53:06]   Expiry: 14-Aug-2025
[2025-08-09 16:53:06] Calling utils.generate_analysis()...
[2025-08-09 16:53:06] UTILS: === generate_analysis() called ===
[2025-08-09 16:53:06] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 16:53:06] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 16:53:06] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 16:53:06] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-09 16:53:09] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 16:53:09] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-09 16:53:09] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 16:53:09] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24400     126.6      24350     109.9          ₹14200
1   Mid Reward      24450     103.3      24300      89.5          ₹11550
2   Low Reward      24500      83.2      24250      72.7           ₹9350
[2025-08-09 16:53:09] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 16:53:09] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 16:53:10] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 16:53:10] UTILS: Generated files: summary_e51ab5e7fa5f4347b99c8834848bba32.png, static/payoff_49c6037df41f4af0bcb4b377eb0d915e.png
[2025-08-09 16:53:10] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-09 16:53:10] ✅ Analysis successful - data saved to session
[2025-08-09 17:02:04] === Generate Analysis View Called ===
[2025-08-09 17:02:04] Request method: POST
[2025-08-09 17:02:04] Form data received:
[2025-08-09 17:02:04]   Instrument: NIFTY
[2025-08-09 17:02:04]   Calculation Type: Weekly
[2025-08-09 17:02:04]   Expiry: 14-Aug-2025
[2025-08-09 17:02:04] Calling utils.generate_analysis()...
[2025-08-09 17:02:04] UTILS: === generate_analysis() called ===
[2025-08-09 17:02:04] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:02:04] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 17:02:04] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:02:05] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-09 17:02:07] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 17:02:07] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-09 17:02:07] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 17:02:07] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24400     126.6      24350     109.9          ₹14200
1   Mid Reward      24450     103.3      24300      89.5          ₹11550
2   Low Reward      24500      83.2      24250      72.7           ₹9350
[2025-08-09 17:02:07] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 17:02:07] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 17:02:07] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 17:02:07] UTILS: Generated files: summary_a45e1cb3b15a420d80bdd5b446fb1be6.png, static/payoff_8131be40a26b4deab4b9e52838b699de.png
[2025-08-09 17:02:07] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-09 17:02:07] ✅ Analysis successful - data saved to session
[2025-08-09 17:03:11] === Generate Analysis View Called ===
[2025-08-09 17:03:11] Request method: POST
[2025-08-09 17:03:11] Form data received:
[2025-08-09 17:03:11]   Instrument: BANKNIFTY
[2025-08-09 17:03:11]   Calculation Type: Weekly
[2025-08-09 17:03:11]   Expiry: 28-Aug-2025
[2025-08-09 17:03:11] Calling utils.generate_analysis()...
[2025-08-09 17:03:11] UTILS: === generate_analysis() called ===
[2025-08-09 17:03:11] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=28-Aug-2025
[2025-08-09 17:03:11] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 17:03:11] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:03:11] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-09 17:03:13] UTILS: 📊 Real API data - CE: 132, PE: 132 strikes
[2025-08-09 17:03:13] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-09 17:03:13] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-09 17:03:13] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      55100    585.70      55000    552.15          ₹31850
1   Mid Reward      55200    534.95      54900    508.55          ₹29200
2   Low Reward      55300    488.90      54800    469.60          ₹26850
[2025-08-09 17:03:13] UTILS: 📊 CE Prices found: 132 items
[2025-08-09 17:03:13] UTILS: 📊 PE Prices found: 132 items
[2025-08-09 17:03:14] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 17:03:14] UTILS: Generated files: summary_2bfee2fcb529438894155761eb46dad9.png, static/payoff_250b878bbb664232b3e28d5fcc6bdad6.png
[2025-08-09 17:03:14] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-09 17:03:14] ✅ Analysis successful - data saved to session
[2025-08-09 17:12:01] UTILS: === generate_analysis() called ===
[2025-08-09 17:12:01] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:12:01] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 17:12:01] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:12:02] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 17:12:04] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 17:12:04] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:12:04] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:12:04] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 17:12:04] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 17:12:04] UTILS: Finding suitable hedges...
[2025-08-09 17:12:04] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:12:04] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 17:12:04] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 17:12:04] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 17:12:38] UTILS: === generate_analysis() called ===
[2025-08-09 17:12:38] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:12:38] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 17:12:38] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:12:39] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 17:12:41] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 17:12:41] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:12:41] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:12:41] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 17:12:41] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 17:12:41] UTILS: Finding suitable hedges...
[2025-08-09 17:12:41] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:12:41] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 17:12:41] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 17:12:41] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 17:12:41] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 17:12:41] UTILS: Generated files: summary_ebdf75d0f0f34c7a8588b9ee1511efa6.png, static/payoff_d5cca5dda9c442ada9854b7ae669d912.png
[2025-08-09 17:14:00] UTILS: === generate_analysis() called ===
[2025-08-09 17:14:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:14:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 17:14:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:14:01] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 17:14:03] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 17:14:03] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:14:03] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:14:03] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 17:14:03] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 17:14:03] UTILS: Finding suitable hedges...
[2025-08-09 17:14:03] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:14:03] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 17:14:03] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 17:14:03] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 17:14:03] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 17:14:03] UTILS: Generated files: summary_73c20e6a17c14a8b963153c21f45b49a.png, static/payoff_06e897f2d0d240d5bccc7451146d86bc.png
[2025-08-09 17:14:19] UTILS: === generate_analysis() called ===
[2025-08-09 17:14:19] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:14:19] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 17:14:19] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:14:20] UTILS: ✅ Zones calculated - Supply: ₹56137.94, Demand: ₹54977.06
[2025-08-09 17:14:22] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-09 17:14:22] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:14:22] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:14:22] UTILS:    CE strikes (from supply ₹56137.94): [56200, 56300, 56400]
[2025-08-09 17:14:22] UTILS:    PE strikes (from demand ₹54977.06): [54900, 54800, 54700]
[2025-08-09 17:14:22] UTILS: Finding suitable hedges...
[2025-08-09 17:14:22] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:14:22] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      56200       0.0      54900       0.0           0.0        0.0
1   Mid Reward      56300       0.0      54800       0.0           0.0        0.0
2   Low Reward      56400       0.0      54700       0.0           0.0        0.0
[2025-08-09 17:14:22] UTILS: 📊 CE Prices found: 0 items
[2025-08-09 17:14:22] UTILS: 📊 PE Prices found: 0 items
[2025-08-09 17:14:22] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 17:14:22] UTILS: Generated files: summary_11b22821f73344b5b639093ceded4ff6.png, static/payoff_888cc35dee804e2486dd2b88cffd72d7.png
[2025-08-09 17:16:10] === Generate Analysis View Called ===
[2025-08-09 17:16:10] Request method: POST
[2025-08-09 17:16:10] Form data received:
[2025-08-09 17:16:10]   Instrument: BANKNIFTY
[2025-08-09 17:16:10]   Calculation Type: Weekly
[2025-08-09 17:16:10]   Expiry: 28-Aug-2025
[2025-08-09 17:16:10] Calling utils.generate_analysis()...
[2025-08-09 17:16:10] UTILS: === generate_analysis() called ===
[2025-08-09 17:16:10] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=28-Aug-2025
[2025-08-09 17:16:10] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-09 17:16:10] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:16:11] UTILS: ✅ Zones calculated - Supply: ₹56137.94, Demand: ₹54977.06
[2025-08-09 17:16:13] UTILS: 📊 Real API data - CE: 132, PE: 132 strikes
[2025-08-09 17:16:13] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:16:13] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:16:13] UTILS:    CE strikes (from supply ₹56137.94): [56200, 56300, 56400]
[2025-08-09 17:16:13] UTILS:    PE strikes (from demand ₹54977.06): [54900, 54800, 54700]
[2025-08-09 17:16:13] UTILS: Finding suitable hedges...
[2025-08-09 17:16:13] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:16:13] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      56200     188.8      54900    508.55        697.35    19525.8
1   Mid Reward      56300     166.1      54800    469.60        635.70    17799.6
2   Low Reward      56400     150.0      54700    425.80        575.80    16122.4
[2025-08-09 17:16:13] UTILS: 📊 CE Prices found: 132 items
[2025-08-09 17:16:13] UTILS: 📊 PE Prices found: 132 items
[2025-08-09 17:16:14] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-09 17:16:14] UTILS: Generated files: summary_876dd786d77e4b59af2c13b3a5feac28.png, static/payoff_1d005093a3b14a59b5cab4124a116620.png
[2025-08-09 17:16:14] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹56138, Demand: ₹54977)
[2025-08-09 17:16:14] ✅ Analysis successful - data saved to session
[2025-08-09 17:16:26] === Generate Analysis View Called ===
[2025-08-09 17:16:26] Request method: POST
[2025-08-09 17:16:26] Form data received:
[2025-08-09 17:16:26]   Instrument: NIFTY
[2025-08-09 17:16:26]   Calculation Type: Weekly
[2025-08-09 17:16:26]   Expiry: 14-Aug-2025
[2025-08-09 17:16:26] Calling utils.generate_analysis()...
[2025-08-09 17:16:26] UTILS: === generate_analysis() called ===
[2025-08-09 17:16:26] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 17:16:26] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 17:16:26] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 17:16:26] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 17:16:29] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 17:16:29] UTILS: 📊 Using zone-based strike selection
[2025-08-09 17:16:29] UTILS: 📊 Zone-based strikes:
[2025-08-09 17:16:29] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 17:16:29] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 17:16:29] UTILS: Finding suitable hedges...
[2025-08-09 17:16:29] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 17:16:29] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 17:16:29] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 17:16:29] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 17:16:29] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 17:16:29] UTILS: Generated files: summary_3d2f3424cc884789a37d90e2dc853196.png, static/payoff_772280ae6a1f40b982993ce1417098db.png
[2025-08-09 17:16:29] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 17:16:29] ✅ Analysis successful - data saved to session
[2025-08-09 19:15:49] === Generate Analysis View Called ===
[2025-08-09 19:15:49] Request method: POST
[2025-08-09 19:15:49] Form data received:
[2025-08-09 19:15:49]   Instrument: NIFTY
[2025-08-09 19:15:49]   Calculation Type: Weekly
[2025-08-09 19:15:49]   Expiry: 14-Aug-2025
[2025-08-09 19:15:49] Calling utils.generate_analysis()...
[2025-08-09 19:15:49] UTILS: === generate_analysis() called ===
[2025-08-09 19:15:49] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 19:15:49] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 19:15:49] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 19:15:50] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 19:15:52] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 19:15:52] UTILS: 📊 Using zone-based strike selection
[2025-08-09 19:15:52] UTILS: 📊 Zone-based strikes:
[2025-08-09 19:15:52] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 19:15:52] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 19:15:52] UTILS: Finding suitable hedges...
[2025-08-09 19:15:52] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 19:15:52] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 19:15:52] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 19:15:52] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 19:15:52] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 19:15:52] UTILS: Generated files: summary_398a87e6749a4165b77b56e5a877ca5c.png, static/payoff_4b10383c38b44297ac3f0cd4ef55e478.png
[2025-08-09 19:15:52] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 19:15:52] ✅ Analysis successful - data saved to session
[2025-08-09 19:43:03] === Generate Analysis View Called ===
[2025-08-09 19:43:03] Request method: POST
[2025-08-09 19:43:03] Form data received:
[2025-08-09 19:43:03]   Instrument: NIFTY
[2025-08-09 19:43:03]   Calculation Type: Weekly
[2025-08-09 19:43:03]   Expiry: 14-Aug-2025
[2025-08-09 19:43:03] Calling utils.generate_analysis()...
[2025-08-09 19:43:03] UTILS: === generate_analysis() called ===
[2025-08-09 19:43:03] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 19:43:03] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 19:43:03] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 19:43:04] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 19:43:06] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 19:43:06] UTILS: 📊 Using zone-based strike selection
[2025-08-09 19:43:06] UTILS: 📊 Zone-based strikes:
[2025-08-09 19:43:06] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 19:43:06] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 19:43:06] UTILS: Finding suitable hedges...
[2025-08-09 19:43:06] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 19:43:06] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 19:43:06] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 19:43:06] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 19:43:07] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 19:43:07] UTILS: Generated files: summary_5974bc7f8f8f44d7b5f10035ddc23864.png, static/payoff_37f6fe567ee1465cbafe872e786a5dec.png
[2025-08-09 19:43:07] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 19:43:07] ✅ Analysis successful - data saved to session
[2025-08-09 20:48:45] === Generate Analysis View Called ===
[2025-08-09 20:48:45] Request method: POST
[2025-08-09 20:48:45] Form data received:
[2025-08-09 20:48:45]   Instrument: NIFTY
[2025-08-09 20:48:45]   Calculation Type: Weekly
[2025-08-09 20:48:45]   Expiry: 21-Aug-2025
[2025-08-09 20:48:45] Calling utils.generate_analysis()...
[2025-08-09 20:48:45] UTILS: === generate_analysis() called ===
[2025-08-09 20:48:45] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-09 20:48:45] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 20:48:45] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 20:48:46] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 20:48:48] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-09 20:48:48] UTILS: 📊 Using zone-based strike selection
[2025-08-09 20:48:48] UTILS: 📊 Zone-based strikes:
[2025-08-09 20:48:48] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 20:48:48] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 20:48:48] UTILS: Finding suitable hedges...
[2025-08-09 20:48:48] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 20:48:48] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850      48.1      24350     159.5         207.6    12456.0
1   Mid Reward      24900      39.5      24300     142.0         181.5    10890.0
2   Low Reward      24950      33.5      24250     124.6         158.1     9486.0
[2025-08-09 20:48:48] UTILS: 📊 CE Prices found: 84 items
[2025-08-09 20:48:48] UTILS: 📊 PE Prices found: 84 items
[2025-08-09 20:48:49] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 20:48:49] UTILS: Generated files: summary_650998ff42bb45baad7758edc6edc142.png, static/payoff_805b997b0a564f27bc8b9fa5f4171a73.png
[2025-08-09 20:48:49] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 20:48:49] ✅ Analysis successful - data saved to session
[2025-08-09 22:35:50] === Generate Analysis View Called ===
[2025-08-09 22:35:50] Request method: POST
[2025-08-09 22:35:50] Form data received:
[2025-08-09 22:35:50]   Instrument: NIFTY
[2025-08-09 22:35:50]   Calculation Type: Weekly
[2025-08-09 22:35:50]   Expiry: 14-Aug-2025
[2025-08-09 22:35:50] Calling utils.generate_analysis()...
[2025-08-09 22:35:50] UTILS: === generate_analysis() called ===
[2025-08-09 22:35:50] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 22:35:50] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 22:35:50] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 22:35:51] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 22:35:52] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 22:35:52] UTILS: 📊 Using zone-based strike selection
[2025-08-09 22:35:52] UTILS: 📊 Zone-based strikes:
[2025-08-09 22:35:52] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 22:35:52] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 22:35:52] UTILS: Finding suitable hedges...
[2025-08-09 22:35:52] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-09 22:35:52] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price  Sell Premium  Target/SL
0  High Reward      24850     15.65      24350     109.9        125.55     7533.0
1   Mid Reward      24900     12.70      24300      89.5        102.20     6132.0
2   Low Reward      24950     10.60      24250      72.7         83.30     4998.0
[2025-08-09 22:35:52] UTILS: 📊 CE Prices found: 87 items
[2025-08-09 22:35:52] UTILS: 📊 PE Prices found: 87 items
[2025-08-09 22:35:53] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 22:35:53] UTILS: Generated files: summary_21211370aa164fea8f15d3ef45b157b5.png, static/payoff_416b73ca4c984d3f995344ecc9352643.png
[2025-08-09 22:35:53] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 22:35:53] ✅ Analysis successful - data saved to session
[2025-08-09 22:38:11] UTILS: === generate_analysis() called ===
[2025-08-09 22:38:11] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 22:38:11] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 22:38:11] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 22:38:12] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 22:38:14] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 22:38:14] UTILS: 📊 Using zone-based strike selection
[2025-08-09 22:38:14] UTILS: 📊 Zone-based strikes:
[2025-08-09 22:38:14] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 22:38:14] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 22:38:14] UTILS: Finding suitable hedges...
[2025-08-09 22:38:14] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 22:38:14] UTILS: Generated files: summary_967d7cbc9f274bfc8e602c8071a3c585.png, static/payoff_3a697d811f1a47e181b4ca102fb7f8ab.png
[2025-08-09 22:39:08] UTILS: === generate_analysis() called ===
[2025-08-09 22:39:08] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 22:39:08] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 22:39:08] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 22:39:09] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 22:39:11] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 22:39:11] UTILS: 📊 Using zone-based strike selection
[2025-08-09 22:39:11] UTILS: 📊 Zone-based strikes:
[2025-08-09 22:39:11] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 22:39:11] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 22:39:11] UTILS: Finding suitable hedges...
[2025-08-09 22:39:11] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 22:39:11] UTILS: Generated files: summary_3b329619ae294d6893f9f249825961b0.png, static/payoff_162623c051204620ab569aa531ca57ae.png
[2025-08-09 22:40:04] === Generate Analysis View Called ===
[2025-08-09 22:40:04] Request method: POST
[2025-08-09 22:40:04] Form data received:
[2025-08-09 22:40:04]   Instrument: NIFTY
[2025-08-09 22:40:04]   Calculation Type: Weekly
[2025-08-09 22:40:04]   Expiry: 14-Aug-2025
[2025-08-09 22:40:04] Calling utils.generate_analysis()...
[2025-08-09 22:40:04] UTILS: === generate_analysis() called ===
[2025-08-09 22:40:04] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-09 22:40:04] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 22:40:04] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 22:40:04] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 22:40:06] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-09 22:40:06] UTILS: 📊 Using zone-based strike selection
[2025-08-09 22:40:06] UTILS: 📊 Zone-based strikes:
[2025-08-09 22:40:06] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 22:40:06] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 22:40:06] UTILS: Finding suitable hedges...
[2025-08-09 22:40:06] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 22:40:06] UTILS: Generated files: summary_9c22acc0064f40718d053da173834401.png, static/payoff_0dc1ac77207d4886b2ffb7030c7b4ed8.png
[2025-08-09 22:40:06] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 22:40:06] ✅ Analysis successful - data saved to session
[2025-08-09 22:44:52] === Generate Analysis View Called ===
[2025-08-09 22:44:52] Request method: POST
[2025-08-09 22:44:52] Form data received:
[2025-08-09 22:44:52]   Instrument: NIFTY
[2025-08-09 22:44:52]   Calculation Type: Weekly
[2025-08-09 22:44:52]   Expiry: 21-Aug-2025
[2025-08-09 22:44:52] Calling utils.generate_analysis()...
[2025-08-09 22:44:52] UTILS: === generate_analysis() called ===
[2025-08-09 22:44:52] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-09 22:44:52] UTILS: Using ticker symbol: ^NSEI
[2025-08-09 22:44:52] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-09 22:44:52] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-09 22:44:54] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-09 22:44:54] UTILS: 📊 Using zone-based strike selection
[2025-08-09 22:44:54] UTILS: 📊 Zone-based strikes:
[2025-08-09 22:44:54] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-09 22:44:54] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-09 22:44:54] UTILS: Finding suitable hedges...
[2025-08-09 22:44:54] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-09 22:44:54] UTILS: Generated files: summary_dfc79f550f39404da970f99e09bdcf39.png, static/payoff_c6d3d80398fe4e958753305fde9446a5.png
[2025-08-09 22:44:54] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-09 22:44:54] ✅ Analysis successful - data saved to session
[2025-08-10 09:32:21] === Generate Analysis View Called ===
[2025-08-10 09:32:21] Request method: POST
[2025-08-10 09:32:21] Form data received:
[2025-08-10 09:32:21]   Instrument: NIFTY
[2025-08-10 09:32:21]   Calculation Type: Weekly
[2025-08-10 09:32:21]   Expiry: 14-Aug-2025
[2025-08-10 09:32:21] Calling utils.generate_analysis()...
[2025-08-10 09:32:21] UTILS: === generate_analysis() called ===
[2025-08-10 09:32:21] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 09:32:21] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:32:21] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:32:22] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:32:24] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 09:32:24] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:32:24] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:32:24] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:32:24] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:32:24] UTILS: Finding suitable hedges...
[2025-08-10 09:32:24] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:32:24] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:33:57] === Generate Analysis View Called ===
[2025-08-10 09:33:57] Request method: POST
[2025-08-10 09:33:57] Form data received:
[2025-08-10 09:33:57]   Instrument: NIFTY
[2025-08-10 09:33:57]   Calculation Type: Weekly
[2025-08-10 09:33:57]   Expiry: 14-Aug-2025
[2025-08-10 09:33:57] Calling utils.generate_analysis()...
[2025-08-10 09:33:57] UTILS: === generate_analysis() called ===
[2025-08-10 09:33:57] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 09:33:57] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:33:57] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:33:57] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:33:59] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 09:33:59] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:33:59] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:33:59] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:33:59] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:33:59] UTILS: Finding suitable hedges...
[2025-08-10 09:33:59] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:33:59] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:35:16] === Generate Analysis View Called ===
[2025-08-10 09:35:16] Request method: POST
[2025-08-10 09:35:16] Form data received:
[2025-08-10 09:35:16]   Instrument: BANKNIFTY
[2025-08-10 09:35:16]   Calculation Type: Weekly
[2025-08-10 09:35:16]   Expiry: 28-Aug-2025
[2025-08-10 09:35:16] Calling utils.generate_analysis()...
[2025-08-10 09:35:16] UTILS: === generate_analysis() called ===
[2025-08-10 09:35:16] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=28-Aug-2025
[2025-08-10 09:35:16] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-10 09:35:16] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:35:16] UTILS: ✅ Zones calculated - Supply: ₹56137.94, Demand: ₹54977.06
[2025-08-10 09:35:19] UTILS: 📊 Real API data - CE: 132, PE: 132 strikes
[2025-08-10 09:35:19] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:35:19] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:35:19] UTILS:    CE strikes (from supply ₹56137.94): [56200, 56300, 56400]
[2025-08-10 09:35:19] UTILS:    PE strikes (from demand ₹54977.06): [54900, 54800, 54700]
[2025-08-10 09:35:19] UTILS: Finding suitable hedges...
[2025-08-10 09:35:19] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:35:19] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:38:29] === Generate Analysis View Called ===
[2025-08-10 09:38:29] Request method: POST
[2025-08-10 09:38:29] Form data received:
[2025-08-10 09:38:29]   Instrument: NIFTY
[2025-08-10 09:38:29]   Calculation Type: Weekly
[2025-08-10 09:38:29]   Expiry: 21-Aug-2025
[2025-08-10 09:38:29] Calling utils.generate_analysis()...
[2025-08-10 09:38:29] UTILS: === generate_analysis() called ===
[2025-08-10 09:38:29] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-10 09:38:29] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:38:29] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:38:29] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:38:32] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-10 09:38:32] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:38:32] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:38:32] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:38:32] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:38:32] UTILS: Finding suitable hedges...
[2025-08-10 09:38:32] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:38:32] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:45:35] === Generate Analysis View Called ===
[2025-08-10 09:45:35] Request method: POST
[2025-08-10 09:45:35] Form data received:
[2025-08-10 09:45:35]   Instrument: NIFTY
[2025-08-10 09:45:35]   Calculation Type: Weekly
[2025-08-10 09:45:35]   Expiry: 21-Aug-2025
[2025-08-10 09:45:35] Calling utils.generate_analysis()...
[2025-08-10 09:45:35] UTILS: === generate_analysis() called ===
[2025-08-10 09:45:35] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-10 09:45:35] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:45:35] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:45:35] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:45:37] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-10 09:45:37] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:45:37] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:45:37] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:45:37] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:45:37] UTILS: Finding suitable hedges...
[2025-08-10 09:45:37] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:45:37] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:49:09] === Generate Analysis View Called ===
[2025-08-10 09:49:09] Request method: POST
[2025-08-10 09:49:09] Form data received:
[2025-08-10 09:49:09]   Instrument: NIFTY
[2025-08-10 09:49:09]   Calculation Type: Weekly
[2025-08-10 09:49:09]   Expiry: 14-Aug-2025
[2025-08-10 09:49:09] Calling utils.generate_analysis()...
[2025-08-10 09:49:09] UTILS: === generate_analysis() called ===
[2025-08-10 09:49:09] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 09:49:09] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:49:09] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:49:10] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:49:12] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 09:49:12] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:49:12] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:49:12] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:49:12] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:49:12] UTILS: Finding suitable hedges...
[2025-08-10 09:49:12] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:49:12] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:51:34] === Generate Analysis View Called ===
[2025-08-10 09:51:34] Request method: POST
[2025-08-10 09:51:34] Form data received:
[2025-08-10 09:51:34]   Instrument: NIFTY
[2025-08-10 09:51:34]   Calculation Type: Weekly
[2025-08-10 09:51:34]   Expiry: 21-Aug-2025
[2025-08-10 09:51:34] Calling utils.generate_analysis()...
[2025-08-10 09:51:34] UTILS: === generate_analysis() called ===
[2025-08-10 09:51:34] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-10 09:51:34] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:51:34] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:51:35] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:51:37] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-10 09:51:37] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:51:37] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:51:37] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:51:37] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:51:37] UTILS: Finding suitable hedges...
[2025-08-10 09:51:37] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:51:37] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:53:18] === Generate Analysis View Called ===
[2025-08-10 09:53:18] Request method: POST
[2025-08-10 09:53:18] Form data received:
[2025-08-10 09:53:18]   Instrument: NIFTY
[2025-08-10 09:53:18]   Calculation Type: Weekly
[2025-08-10 09:53:18]   Expiry: 14-Aug-2025
[2025-08-10 09:53:18] Calling utils.generate_analysis()...
[2025-08-10 09:53:18] UTILS: === generate_analysis() called ===
[2025-08-10 09:53:18] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 09:53:18] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:53:18] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:53:18] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:53:20] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 09:53:20] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:53:20] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:53:20] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:53:20] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:53:20] UTILS: Finding suitable hedges...
[2025-08-10 09:53:20] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:53:20] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 09:57:28] === Generate Analysis View Called ===
[2025-08-10 09:57:28] Request method: POST
[2025-08-10 09:57:28] Form data received:
[2025-08-10 09:57:28]   Instrument: NIFTY
[2025-08-10 09:57:28]   Calculation Type: Weekly
[2025-08-10 09:57:28]   Expiry: 21-Aug-2025
[2025-08-10 09:57:28] Calling utils.generate_analysis()...
[2025-08-10 09:57:28] UTILS: === generate_analysis() called ===
[2025-08-10 09:57:28] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-10 09:57:28] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 09:57:28] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 09:57:29] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 09:57:30] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-10 09:57:30] UTILS: 📊 Using zone-based strike selection
[2025-08-10 09:57:30] UTILS: 📊 Zone-based strikes:
[2025-08-10 09:57:30] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 09:57:30] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 09:57:30] UTILS: Finding suitable hedges...
[2025-08-10 09:57:31] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 09:57:31] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:00:37] === Generate Analysis View Called ===
[2025-08-10 10:00:37] Request method: POST
[2025-08-10 10:00:37] Form data received:
[2025-08-10 10:00:37]   Instrument: NIFTY
[2025-08-10 10:00:37]   Calculation Type: Weekly
[2025-08-10 10:00:37]   Expiry: 14-Aug-2025
[2025-08-10 10:00:37] Calling utils.generate_analysis()...
[2025-08-10 10:00:37] UTILS: === generate_analysis() called ===
[2025-08-10 10:00:37] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:00:37] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:00:37] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:00:38] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:00:40] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:00:40] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:00:40] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:00:40] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:00:40] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:00:40] UTILS: Finding suitable hedges...
[2025-08-10 10:00:40] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 10:00:40] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:04:33] === Generate Analysis View Called ===
[2025-08-10 10:04:33] Request method: POST
[2025-08-10 10:04:33] Form data received:
[2025-08-10 10:04:33]   Instrument: NIFTY
[2025-08-10 10:04:33]   Calculation Type: Weekly
[2025-08-10 10:04:33]   Expiry: 14-Aug-2025
[2025-08-10 10:04:33] Calling utils.generate_analysis()...
[2025-08-10 10:04:33] UTILS: === generate_analysis() called ===
[2025-08-10 10:04:33] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:04:33] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:04:33] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:04:34] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:04:36] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:04:36] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:04:36] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:04:36] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:04:36] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:04:36] UTILS: Finding suitable hedges...
[2025-08-10 10:04:36] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 10:04:36] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:07:50] === Generate Analysis View Called ===
[2025-08-10 10:07:50] Request method: POST
[2025-08-10 10:07:50] Form data received:
[2025-08-10 10:07:50]   Instrument: NIFTY
[2025-08-10 10:07:50]   Calculation Type: Weekly
[2025-08-10 10:07:50]   Expiry: 14-Aug-2025
[2025-08-10 10:07:50] Calling utils.generate_analysis()...
[2025-08-10 10:07:50] UTILS: === generate_analysis() called ===
[2025-08-10 10:07:50] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:07:50] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:07:50] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:07:50] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:07:52] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:07:52] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:07:52] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:07:52] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:07:52] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:07:52] UTILS: Finding suitable hedges...
[2025-08-10 10:07:52] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 10:07:52] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:11:00] === Generate Analysis View Called ===
[2025-08-10 10:11:00] Request method: POST
[2025-08-10 10:11:00] Form data received:
[2025-08-10 10:11:00]   Instrument: NIFTY
[2025-08-10 10:11:00]   Calculation Type: Weekly
[2025-08-10 10:11:00]   Expiry: 14-Aug-2025
[2025-08-10 10:11:00] Calling utils.generate_analysis()...
[2025-08-10 10:11:00] UTILS: === generate_analysis() called ===
[2025-08-10 10:11:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:11:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:11:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:11:00] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:11:02] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:11:02] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:11:02] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:11:02] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:11:02] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:11:02] UTILS: Finding suitable hedges...
[2025-08-10 10:11:02] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 10:11:02] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:14:43] === Generate Analysis View Called ===
[2025-08-10 10:14:43] Request method: POST
[2025-08-10 10:14:43] Form data received:
[2025-08-10 10:14:43]   Instrument: NIFTY
[2025-08-10 10:14:43]   Calculation Type: Weekly
[2025-08-10 10:14:43]   Expiry: 14-Aug-2025
[2025-08-10 10:14:43] Calling utils.generate_analysis()...
[2025-08-10 10:14:43] UTILS: === generate_analysis() called ===
[2025-08-10 10:14:43] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:14:43] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:14:43] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:14:44] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:14:46] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:14:46] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:14:46] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:14:46] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:14:46] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:14:46] UTILS: Finding suitable hedges...
[2025-08-10 10:14:46] ❌ Exception occurred: Error generating analysis: 'Total Hedge'
[2025-08-10 10:14:46] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Total Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 899, in generate_analysis
    payoff_filepath = generate_payoff_chart(df, lot_size, current_price, instrument_name, zone_label, expiry_label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 594, in generate_payoff_chart
    hedge_cost = strategy['Total Hedge']
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Total Hedge'

[2025-08-10 10:17:51] === Generate Analysis View Called ===
[2025-08-10 10:17:51] Request method: POST
[2025-08-10 10:17:51] Form data received:
[2025-08-10 10:17:51]   Instrument: NIFTY
[2025-08-10 10:17:51]   Calculation Type: Weekly
[2025-08-10 10:17:51]   Expiry: 21-Aug-2025
[2025-08-10 10:17:51] Calling utils.generate_analysis()...
[2025-08-10 10:17:51] UTILS: === generate_analysis() called ===
[2025-08-10 10:17:51] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=21-Aug-2025
[2025-08-10 10:17:51] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:17:51] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:17:52] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:17:53] UTILS: 📊 Real API data - CE: 84, PE: 84 strikes
[2025-08-10 10:17:53] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:17:53] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:17:53] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:17:53] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:17:53] UTILS: Finding suitable hedges...
[2025-08-10 10:17:54] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 10:17:54] UTILS: Generated files: summary_d1eae93c8eda439e8379526a7f70a6d6.png, static/payoff_8210d3c13f774eb3a64ea8c839135038.png
[2025-08-10 10:17:54] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 10:17:54] ✅ Analysis successful - data saved to session
[2025-08-10 10:20:42] === Generate Analysis View Called ===
[2025-08-10 10:20:42] Request method: POST
[2025-08-10 10:20:42] Form data received:
[2025-08-10 10:20:42]   Instrument: NIFTY
[2025-08-10 10:20:42]   Calculation Type: Weekly
[2025-08-10 10:20:42]   Expiry: 14-Aug-2025
[2025-08-10 10:20:42] Calling utils.generate_analysis()...
[2025-08-10 10:20:42] UTILS: === generate_analysis() called ===
[2025-08-10 10:20:42] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:20:42] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:20:42] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:20:43] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:20:45] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:20:45] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:20:45] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:20:45] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:20:45] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:20:45] UTILS: Finding suitable hedges...
[2025-08-10 10:20:45] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 10:20:45] UTILS: Generated files: summary_84a8393abf0644afa158266875796968.png, static/payoff_af1c749c094c4c3d95f4b2e8d20e59bf.png
[2025-08-10 10:20:45] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 10:20:45] ✅ Analysis successful - data saved to session
[2025-08-10 10:40:43] === Generate Analysis View Called ===
[2025-08-10 10:40:43] Request method: POST
[2025-08-10 10:40:43] Form data received:
[2025-08-10 10:40:43]   Instrument: NIFTY
[2025-08-10 10:40:43]   Calculation Type: Weekly
[2025-08-10 10:40:43]   Expiry: 14-Aug-2025
[2025-08-10 10:40:43] Calling utils.generate_analysis()...
[2025-08-10 10:40:43] UTILS: === generate_analysis() called ===
[2025-08-10 10:40:43] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:40:43] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:40:43] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:40:44] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:40:45] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:40:45] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:40:45] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:40:45] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:40:45] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:40:45] UTILS: Finding suitable hedges...
[2025-08-10 10:40:46] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 10:40:46] UTILS: Generated files: summary_530a5e98e2564b859857bd5ee70b97e1.png, static/payoff_e4cd2fc87de242dba1d0c5dc6d7af0db.png
[2025-08-10 10:40:46] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 10:40:46] ✅ Analysis successful - data saved to session
[2025-08-10 10:41:46] === Generate Analysis View Called ===
[2025-08-10 10:41:46] Request method: POST
[2025-08-10 10:41:46] Form data received:
[2025-08-10 10:41:46]   Instrument: NIFTY
[2025-08-10 10:41:46]   Calculation Type: Weekly
[2025-08-10 10:41:46]   Expiry: 14-Aug-2025
[2025-08-10 10:41:46] Calling utils.generate_analysis()...
[2025-08-10 10:41:46] UTILS: === generate_analysis() called ===
[2025-08-10 10:41:46] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:41:46] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:41:46] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:41:47] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:41:49] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:41:49] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:41:49] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:41:49] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:41:49] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:41:49] UTILS: Finding suitable hedges...
[2025-08-10 10:41:49] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 10:41:49] UTILS: Generated files: summary_0cd154834d7a443ea5965a5500e20934.png, static/payoff_1d800a51175a4a7b97714d3170a27520.png
[2025-08-10 10:41:49] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 10:41:49] ✅ Analysis successful - data saved to session
[2025-08-10 10:52:27] === Generate Analysis View Called ===
[2025-08-10 10:52:27] Request method: POST
[2025-08-10 10:52:27] Form data received:
[2025-08-10 10:52:27]   Instrument: NIFTY
[2025-08-10 10:52:27]   Calculation Type: Weekly
[2025-08-10 10:52:27]   Expiry: 14-Aug-2025
[2025-08-10 10:52:27] Calling utils.generate_analysis()...
[2025-08-10 10:52:27] UTILS: === generate_analysis() called ===
[2025-08-10 10:52:27] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 10:52:27] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 10:52:27] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 10:52:27] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 10:52:29] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 10:52:29] UTILS: 📊 Using zone-based strike selection
[2025-08-10 10:52:29] UTILS: 📊 Zone-based strikes:
[2025-08-10 10:52:29] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 10:52:29] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 10:52:29] UTILS: Finding suitable hedges...
[2025-08-10 10:52:30] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 10:52:30] UTILS: Generated files: summary_b7159702e40c4b0b9e0a86fbbc9da554.png, static/payoff_8a63c459e9b04ebbabf247940e2ec1e2.png
[2025-08-10 10:52:30] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 10:52:30] ✅ Analysis successful - data saved to session
[2025-08-10 11:21:18] === Generate Analysis View Called ===
[2025-08-10 11:21:18] Request method: POST
[2025-08-10 11:21:18] Form data received:
[2025-08-10 11:21:18]   Instrument: NIFTY
[2025-08-10 11:21:18]   Calculation Type: Weekly
[2025-08-10 11:21:18]   Expiry: 14-Aug-2025
[2025-08-10 11:21:18] Calling utils.generate_analysis()...
[2025-08-10 11:21:18] UTILS: === generate_analysis() called ===
[2025-08-10 11:21:18] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 11:21:18] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 11:21:18] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 11:21:23] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 11:21:24] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 11:21:24] UTILS: 📊 Using zone-based strike selection
[2025-08-10 11:21:24] UTILS: 📊 Zone-based strikes:
[2025-08-10 11:21:24] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 11:21:24] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 11:21:24] UTILS: Finding suitable hedges...
[2025-08-10 11:21:25] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 11:21:25] UTILS: Generated files: summary_6699e62e0140481f85c819966fbc5d30.png, static/payoff_1a46db0165b34ef79cb44726b96b93a6.png
[2025-08-10 11:21:25] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 11:21:25] ✅ Analysis successful - data saved to session
[2025-08-10 11:23:40] === Generate Analysis View Called ===
[2025-08-10 11:23:40] Request method: POST
[2025-08-10 11:23:40] Form data received:
[2025-08-10 11:23:40]   Instrument: NIFTY
[2025-08-10 11:23:40]   Calculation Type: Weekly
[2025-08-10 11:23:40]   Expiry: 14-Aug-2025
[2025-08-10 11:23:40] Calling utils.generate_analysis()...
[2025-08-10 11:23:40] UTILS: === generate_analysis() called ===
[2025-08-10 11:23:40] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 11:23:40] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 11:23:40] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 11:23:43] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 11:23:45] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 11:23:45] UTILS: 📊 Using zone-based strike selection
[2025-08-10 11:23:45] UTILS: 📊 Zone-based strikes:
[2025-08-10 11:23:45] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 11:23:45] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 11:23:45] UTILS: Finding suitable hedges...
[2025-08-10 11:23:46] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 11:23:46] UTILS: Generated files: summary_d9ecc4d1a15546b9ad5c19890c2652a3.png, static/payoff_da87dda7d1c54ae48396b1e6eee1a534.png
[2025-08-10 11:23:46] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 11:23:46] ✅ Analysis successful - data saved to session
[2025-08-10 13:26:48] === Generate Analysis View Called ===
[2025-08-10 13:26:48] Request method: POST
[2025-08-10 13:26:48] Form data received:
[2025-08-10 13:26:48]   Instrument: NIFTY
[2025-08-10 13:26:48]   Calculation Type: Weekly
[2025-08-10 13:26:48]   Expiry: 14-Aug-2025
[2025-08-10 13:26:48] Calling utils.generate_analysis()...
[2025-08-10 13:26:48] UTILS: === generate_analysis() called ===
[2025-08-10 13:26:48] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 13:26:48] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 13:26:48] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 13:26:51] UTILS: ✅ Zones calculated - Supply: ₹24413.3, Demand: ₹24313.3
[2025-08-10 13:26:52] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 13:26:52] UTILS: 📊 Using zone-based strike selection
[2025-08-10 13:26:52] UTILS: 📊 Zone-based strikes:
[2025-08-10 13:26:52] UTILS:    CE strikes (from supply ₹24413.3): [24450, 24500, 24550]
[2025-08-10 13:26:52] UTILS:    PE strikes (from demand ₹24313.3): [24300, 24250, 24200]
[2025-08-10 13:26:52] UTILS: Finding suitable hedges...
[2025-08-10 13:26:52] UTILS: Finding suitable hedges with improved logic...
[2025-08-10 13:26:53] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 13:26:53] UTILS: Generated files: summary_104f590e5e774c46a88ad84102433b35.png, static/payoff_fd0837b4702e49cc8753a4509360b665.png
[2025-08-10 13:26:53] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24413, Demand: ₹24313)
[2025-08-10 13:26:53] ✅ Analysis successful - data saved to session
[2025-08-10 13:39:34] === Generate Analysis View Called ===
[2025-08-10 13:39:34] Request method: POST
[2025-08-10 13:39:34] Form data received:
[2025-08-10 13:39:34]   Instrument: NIFTY
[2025-08-10 13:39:34]   Calculation Type: Weekly
[2025-08-10 13:39:34]   Expiry: 14-Aug-2025
[2025-08-10 13:39:34] Calling utils.generate_analysis()...
[2025-08-10 13:39:36] Analysis result: <class 'dict'>, Status: Analysis completed successfully
[2025-08-10 13:39:36] ✅ Analysis successful - data saved to session
[2025-08-10 14:02:36] === Generate Analysis View Called ===
[2025-08-10 14:02:36] Request method: POST
[2025-08-10 14:02:36] Form data received:
[2025-08-10 14:02:36]   Instrument: NIFTY
[2025-08-10 14:02:36]   Calculation Type: Weekly
[2025-08-10 14:02:36]   Expiry: 14-Aug-2025
[2025-08-10 14:02:36] Calling utils.generate_analysis()...
[2025-08-10 14:02:36] UTILS: === generate_analysis() called ===
[2025-08-10 14:02:36] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 14:02:36] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 14:02:36] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 14:02:39] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 14:02:41] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 14:02:41] UTILS: 📊 Using zone-based strike selection
[2025-08-10 14:02:41] UTILS: 📊 Zone-based strikes:
[2025-08-10 14:02:41] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 14:02:41] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 14:02:41] UTILS: Finding suitable hedges...
[2025-08-10 14:02:41] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 14:02:41] UTILS: Generated files: summary_75a66cc3bf0640cb861049ff6ef94353.png, static/payoff_016121d680d9467997fc18bee6ad8b0c.png
[2025-08-10 14:02:41] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 14:02:41] ✅ Analysis successful - data saved to session
[2025-08-10 14:14:52] === Generate Analysis View Called ===
[2025-08-10 14:14:52] Request method: POST
[2025-08-10 14:14:52] Form data received:
[2025-08-10 14:14:52]   Instrument: NIFTY
[2025-08-10 14:14:52]   Calculation Type: Weekly
[2025-08-10 14:14:52]   Expiry: 14-Aug-2025
[2025-08-10 14:14:52] Calling utils.generate_analysis()...
[2025-08-10 14:14:52] UTILS: === generate_analysis() called ===
[2025-08-10 14:14:52] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 14:14:52] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 14:14:52] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 14:14:55] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 14:14:57] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 14:14:57] UTILS: 📊 Using zone-based strike selection
[2025-08-10 14:14:57] UTILS: 📊 Zone-based strikes:
[2025-08-10 14:14:57] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 14:14:57] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 14:14:57] UTILS: Finding suitable hedges...
[2025-08-10 14:14:58] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 14:14:58] UTILS: Generated files: summary_c8a99f2cc7284409b311c5bcbacf079a.png, static/payoff_5102216e12ed4dd48f3437a4d6b56567.png
[2025-08-10 14:14:58] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 14:14:58] ✅ Analysis successful - data saved to session
[2025-08-10 14:29:48] === Generate Analysis View Called ===
[2025-08-10 14:29:48] Request method: POST
[2025-08-10 14:29:48] Form data received:
[2025-08-10 14:29:48]   Instrument: NIFTY
[2025-08-10 14:29:48]   Calculation Type: Weekly
[2025-08-10 14:29:48]   Expiry: 14-Aug-2025
[2025-08-10 14:29:48] Calling utils.generate_analysis()...
[2025-08-10 14:29:48] UTILS: === generate_analysis() called ===
[2025-08-10 14:29:48] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 14:29:48] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 14:29:48] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 14:29:52] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 14:29:54] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 14:29:54] UTILS: 📊 Using zone-based strike selection (selling.py logic)
[2025-08-10 14:29:54] UTILS: 📊 Zone-based strikes (selling.py logic):
[2025-08-10 14:29:54] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 14:29:54] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 14:29:54] UTILS: Finding suitable hedges...
[2025-08-10 14:29:54] ❌ Exception occurred: Error generating analysis: 'CE Hedge'
[2025-08-10 14:29:54] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/indexes/base.py", line 3790, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 152, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 181, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7080, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'CE Hedge'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 95, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 920, in generate_analysis
    <td><span class="badge bg-secondary">{row['CE Hedge']}</span></td>
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/series.py", line 1040, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/series.py", line 1156, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/indexes/base.py", line 3797, in get_loc
    raise KeyError(key) from err
KeyError: 'CE Hedge'

[2025-08-10 14:42:45] === Generate Analysis View Called ===
[2025-08-10 14:42:45] Request method: POST
[2025-08-10 14:42:45] Form data received:
[2025-08-10 14:42:45]   Instrument: NIFTY
[2025-08-10 14:42:45]   Calculation Type: Weekly
[2025-08-10 14:42:45]   Expiry: 14-Aug-2025
[2025-08-10 14:42:45] Calling utils.generate_analysis()...
[2025-08-10 14:42:50] Analysis result: <class 'dict'>, Status: Charts generated for NIFTY. Supply Zone: 24850.57, Demand Zone: 23876.03
[2025-08-10 14:42:50] ✅ Analysis successful - data saved to session
[2025-08-10 14:59:33] === Generate Analysis View Called ===
[2025-08-10 14:59:33] Request method: POST
[2025-08-10 14:59:33] Form data received:
[2025-08-10 14:59:33]   Instrument: NIFTY
[2025-08-10 14:59:33]   Calculation Type: Weekly
[2025-08-10 14:59:33]   Expiry: 14-Aug-2025
[2025-08-10 14:59:33] Calling utils.generate_analysis()...
[2025-08-10 14:59:33] UTILS: === generate_analysis() called ===
[2025-08-10 14:59:33] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 14:59:33] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 14:59:33] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 14:59:34] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 14:59:36] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 14:59:36] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 14:59:36] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-10 14:59:36] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  CE Hedge  CE H.Price  PE Strike  PE Price  PE Hedge  PE H.Price  Sell Premium  Net Premium  Total Hedge  Target/SL
0  High Reward      24400     126.6     24900        12.7      24350     109.9     23800        11.4         236.5        212.4         24.1    12744.0
1   Mid Reward      24450     103.3     25000         8.1      24300      89.5     23700         8.6         192.8        176.1         16.7    10566.0
2   Low Reward      24500      83.2     25000         8.1      24250      72.7     23600         6.7         155.9        141.1         14.8     8466.0
[2025-08-10 14:59:36] UTILS: 📊 CE Prices found: 87 items
[2025-08-10 14:59:36] UTILS: 📊 PE Prices found: 87 items
[2025-08-10 14:59:37] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 14:59:37] UTILS: Generated files: summary_c08e23653b324a05ab1e6e8c165f9033.png, static/payoff_d176856079ea49cf9c1a5e3c1d66a54c.png
[2025-08-10 14:59:37] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-10 14:59:37] ✅ Analysis successful - data saved to session
[2025-08-10 15:09:51] === Generate Analysis View Called ===
[2025-08-10 15:09:51] Request method: POST
[2025-08-10 15:09:51] Form data received:
[2025-08-10 15:09:51]   Instrument: NIFTY
[2025-08-10 15:09:51]   Calculation Type: Weekly
[2025-08-10 15:09:51]   Expiry: 14-Aug-2025
[2025-08-10 15:09:51] Calling utils.generate_analysis()...
[2025-08-10 15:09:51] UTILS: === generate_analysis() called ===
[2025-08-10 15:09:51] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 15:09:51] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 15:09:51] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 15:09:52] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 15:09:54] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 15:09:54] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 15:09:54] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-10 15:09:54] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  CE Hedge  CE H.Price  PE Strike  PE Price  PE Hedge  PE H.Price  Sell Premium  Net Premium  Total Hedge  Target/SL
0  High Reward      24350    152.45     24900        12.7      24350     109.9     23800        11.4        262.35       238.25         24.1    14295.0
1   Mid Reward      24400    126.60     24900        12.7      24300      89.5     23700         8.6        216.10       194.80         21.3    11688.0
2   Low Reward      24450    103.30     25000         8.1      24250      72.7     23600         6.7        176.00       161.20         14.8     9672.0
[2025-08-10 15:09:54] UTILS: 📊 CE Prices found: 87 items
[2025-08-10 15:09:54] UTILS: 📊 PE Prices found: 87 items
[2025-08-10 15:09:54] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 15:09:54] UTILS: Generated files: summary_6e045ab0a72f4409a2a40f010719a335.png, static/payoff_d677356958d646c989680e8d062137fd.png
[2025-08-10 15:09:54] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-10 15:09:54] ✅ Analysis successful - data saved to session
[2025-08-10 15:40:33] === Generate Analysis View Called ===
[2025-08-10 15:40:33] Request method: POST
[2025-08-10 15:40:33] Form data received:
[2025-08-10 15:40:33]   Instrument: NIFTY
[2025-08-10 15:40:33]   Calculation Type: Weekly
[2025-08-10 15:40:33]   Expiry: 14-Aug-2025
[2025-08-10 15:40:33] Calling utils.generate_analysis()...
[2025-08-10 15:40:33] UTILS: === generate_analysis() called ===
[2025-08-10 15:40:33] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 15:40:33] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 15:40:33] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 15:40:33] UTILS: ✅ Zones calculated - Supply: ₹24152.02, Demand: ₹23191.06
[2025-08-10 15:40:35] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 15:40:35] UTILS: 📊 Using zone-based strike selection
[2025-08-10 15:40:35] UTILS: 📊 Zone-based strikes:
[2025-08-10 15:40:35] UTILS:    CE strikes (from supply ₹24152.02): [24150, 24200, 24250]
[2025-08-10 15:40:35] UTILS:    PE strikes (from demand ₹23191.06): [23150, 23100, 23050]
[2025-08-10 15:40:35] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-10 15:40:35] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  CE Hedge  CE H.Price  PE Strike  PE Price  PE Hedge  PE H.Price  Sell Premium  Net Premium  Total Hedge  Target/SL
0  High Reward      24150    293.00     24700        33.1      23150      3.05     22800         2.2        296.05       260.75         35.3    15645.0
1   Mid Reward      24200    251.55     24800        20.4      23100      2.95     22800         2.2        254.50       231.90         22.6    13914.0
2   Low Reward      24250    214.80     24800        20.4      23050      2.90     22800         2.2        217.70       195.10         22.6    11706.0
[2025-08-10 15:40:35] UTILS: 📊 CE Prices found: 87 items
[2025-08-10 15:40:35] UTILS: 📊 PE Prices found: 87 items
[2025-08-10 15:40:36] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 15:40:36] UTILS: Generated files: summary_3aae17814602452e8543774f8a663fd8.png, static/payoff_95b3c53da95a4288aeee2286475b89a6.png
[2025-08-10 15:40:36] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24152, Demand: ₹23191)
[2025-08-10 15:40:36] ✅ Analysis successful - data saved to session
[2025-08-10 15:44:54] === Generate Analysis View Called ===
[2025-08-10 15:44:54] Request method: POST
[2025-08-10 15:44:54] Form data received:
[2025-08-10 15:44:54]   Instrument: NIFTY
[2025-08-10 15:44:54]   Calculation Type: Weekly
[2025-08-10 15:44:54]   Expiry: 14-Aug-2025
[2025-08-10 15:44:54] Calling utils.generate_analysis()...
[2025-08-10 15:44:54] UTILS: === generate_analysis() called ===
[2025-08-10 15:44:54] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 15:44:54] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 15:44:54] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 15:44:54] UTILS: ✅ Zones calculated - Supply: ₹24152.02, Demand: ₹23191.06
[2025-08-10 15:44:56] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 15:44:56] UTILS: 📊 Using zone-based strike selection
[2025-08-10 15:44:56] UTILS: 📊 Zone-based strikes:
[2025-08-10 15:44:56] UTILS:    CE strikes (from supply ₹24152.02): [24150, 24200, 24250]
[2025-08-10 15:44:56] UTILS:    PE strikes (from demand ₹23191.06): [23150, 23100, 23050]
[2025-08-10 15:44:56] UTILS: 📊 DataFrame created with shape: (3, 13)
[2025-08-10 15:44:56] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  CE Hedge  CE H.Price  PE Strike  PE Price  PE Hedge  PE H.Price  Sell Premium  Net Premium  Total Hedge  Target/SL
0  High Reward      24150    293.00     24700        33.1      23150      3.05     22800         2.2        296.05       260.75         35.3    15645.0
1   Mid Reward      24200    251.55     24800        20.4      23100      2.95     22800         2.2        254.50       231.90         22.6    13914.0
2   Low Reward      24250    214.80     24800        20.4      23050      2.90     22800         2.2        217.70       195.10         22.6    11706.0
[2025-08-10 15:44:56] UTILS: 📊 CE Prices found: 87 items
[2025-08-10 15:44:56] UTILS: 📊 PE Prices found: 87 items
[2025-08-10 15:44:57] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 15:44:57] UTILS: Generated files: summary_234ca2e915fa4096b323f900958dacea.png, static/payoff_bdc6adc25dae472d83e56b8cc2fe1f0c.png
[2025-08-10 15:44:57] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24152, Demand: ₹23191)
[2025-08-10 15:44:57] ✅ Analysis successful - data saved to session
[2025-08-10 16:08:38] UTILS: === generate_analysis() called ===
[2025-08-10 16:08:38] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 16:08:38] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 16:08:38] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 16:08:38] UTILS: ✅ Zones calculated - Supply: ₹24152.02, Demand: ₹23191.06
[2025-08-10 16:08:40] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 16:08:40] UTILS: 📊 Using zone-based strike selection
[2025-08-10 16:08:40] UTILS: 📊 Zone-based strikes:
[2025-08-10 16:08:40] UTILS:    CE strikes (from supply ₹24152.02): [24150, 24200, 24250]
[2025-08-10 16:08:40] UTILS:    PE strikes (from demand ₹23191.06): [23150, 23100, 23050]
[2025-08-10 16:08:40] UTILS: Finding suitable hedges...
[2025-08-10 16:08:41] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 16:08:41] UTILS: Generated files: summary_6caa36e40c4e4270b8082026051f62cf.png, static/payoff_f17e6e4909434d98a6de3a6bd0f4fc54.png
[2025-08-10 16:13:54] === Generate Analysis View Called ===
[2025-08-10 16:13:54] Request method: POST
[2025-08-10 16:13:54] Form data received:
[2025-08-10 16:13:54]   Instrument: NIFTY
[2025-08-10 16:13:54]   Calculation Type: Weekly
[2025-08-10 16:13:54]   Expiry: 14-Aug-2025
[2025-08-10 16:13:54] Calling utils.generate_analysis()...
[2025-08-10 16:13:54] UTILS: === generate_analysis() called ===
[2025-08-10 16:13:54] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 16:13:54] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 16:13:54] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 16:13:57] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 16:13:59] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 16:13:59] UTILS: 📊 Using zone-based strike selection
[2025-08-10 16:13:59] UTILS: 📊 Zone-based strikes:
[2025-08-10 16:13:59] UTILS:    CE strikes (from supply ₹24850.566): [24850, 24900, 24950]
[2025-08-10 16:13:59] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 16:13:59] UTILS: Finding suitable hedges...
[2025-08-10 16:14:00] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 16:14:00] UTILS: Generated files: summary_a4d278f283c44355a0ae9af685b0366f.png, static/payoff_24b2317809f24391a560ab5664bba002.png
[2025-08-10 16:14:00] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 16:14:00] ✅ Analysis successful - data saved to session
[2025-08-10 16:17:19] === Generate Analysis View Called ===
[2025-08-10 16:17:19] Request method: POST
[2025-08-10 16:17:19] Form data received:
[2025-08-10 16:17:19]   Instrument: NIFTY
[2025-08-10 16:17:19]   Calculation Type: Weekly
[2025-08-10 16:17:19]   Expiry: 14-Aug-2025
[2025-08-10 16:17:19] Calling utils.generate_analysis()...
[2025-08-10 16:17:19] UTILS: === generate_analysis() called ===
[2025-08-10 16:17:19] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 16:17:19] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 16:17:19] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 16:17:23] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 16:17:25] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 16:17:25] UTILS: 📊 Using zone-based strike selection
[2025-08-10 16:17:25] UTILS: 📊 Zone-based strikes:
[2025-08-10 16:17:25] UTILS:    CE strikes (from supply ₹24850.566): [24850, 24900, 24950]
[2025-08-10 16:17:25] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 16:17:25] UTILS: Finding suitable hedges...
[2025-08-10 16:17:26] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 16:17:26] UTILS: Generated files: summary_246bdc7ba9d74be3a04b443a8be89574.png, static/payoff_8902489045d5433ba8b37ff7da3e69d6.png
[2025-08-10 16:17:26] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 16:17:26] ✅ Analysis successful - data saved to session
[2025-08-10 16:27:12] === Generate Analysis View Called ===
[2025-08-10 16:27:12] Request method: POST
[2025-08-10 16:27:12] Form data received:
[2025-08-10 16:27:12]   Instrument: NIFTY
[2025-08-10 16:27:12]   Calculation Type: Weekly
[2025-08-10 16:27:12]   Expiry: 14-Aug-2025
[2025-08-10 16:27:12] Calling utils.generate_analysis()...
[2025-08-10 16:27:12] UTILS: === generate_analysis() called ===
[2025-08-10 16:27:12] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 16:27:12] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 16:27:12] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 16:27:15] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 16:27:17] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 16:27:17] UTILS: 📊 Using zone-based strike selection
[2025-08-10 16:27:17] UTILS: 📊 Zone-based strikes:
[2025-08-10 16:27:17] UTILS:    CE strikes (from supply ₹24850.566): [24850, 24900, 24950]
[2025-08-10 16:27:17] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 16:27:17] UTILS: Finding suitable hedges...
[2025-08-10 16:27:18] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 16:27:18] UTILS: Generated files: summary_c9b6463eb3cf4962a7af81a524df18a7.png, static/payoff_2a81b6c91a0c4637a9ce6c70293b416b.png
[2025-08-10 16:27:18] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 16:27:18] ✅ Analysis successful - data saved to session
[2025-08-10 16:55:40] === Generate Analysis View Called ===
[2025-08-10 16:55:40] Request method: POST
[2025-08-10 16:55:40] Form data received:
[2025-08-10 16:55:40]   Instrument: NIFTY
[2025-08-10 16:55:40]   Calculation Type: Weekly
[2025-08-10 16:55:40]   Expiry: 14-Aug-2025
[2025-08-10 16:55:40] Calling utils.generate_analysis()...
[2025-08-10 16:55:40] UTILS: === generate_analysis() called ===
[2025-08-10 16:55:40] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 16:55:40] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 16:55:40] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 16:55:40] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 16:55:42] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 16:55:42] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 16:55:42] UTILS: Finding suitable hedges...
[2025-08-10 16:55:42] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 16:55:42] UTILS: Generated files: summary_934b60aa61cd4b3bb1aba1a80d1bd693.png, static/payoff_274e320b91f84c9e96248a242c72bc11.png
[2025-08-10 16:55:42] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-10 16:55:42] ✅ Analysis successful - data saved to session
[2025-08-10 17:35:00] === Generate Analysis View Called ===
[2025-08-10 17:35:00] Request method: POST
[2025-08-10 17:35:00] Form data received:
[2025-08-10 17:35:00]   Instrument: NIFTY
[2025-08-10 17:35:00]   Calculation Type: Weekly
[2025-08-10 17:35:00]   Expiry: 14-Aug-2025
[2025-08-10 17:35:00] Calling utils.generate_analysis()...
[2025-08-10 17:35:00] UTILS: === generate_analysis() called ===
[2025-08-10 17:35:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 17:35:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 17:35:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 17:35:03] UTILS: ✅ Zones calculated - Supply: ₹24850.566, Demand: ₹23876.034
[2025-08-10 17:35:05] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 17:35:05] UTILS: 📊 Using zone-based strike selection
[2025-08-10 17:35:05] UTILS: 📊 Zone-based strikes:
[2025-08-10 17:35:05] UTILS:    CE strikes (from supply ₹24850.566): [24900, 24950, 25000]
[2025-08-10 17:35:05] UTILS:    PE strikes (from demand ₹23876.034): [23850, 23800, 23750]
[2025-08-10 17:35:05] UTILS: Finding suitable hedges...
[2025-08-10 17:35:05] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 17:35:05] UTILS: Generated files: summary_2fddf550a53e4ef0854071f763e8e623.png, static/payoff_1c03abcdf722470f9688994b97dd284b.png
[2025-08-10 17:35:05] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24851, Demand: ₹23876)
[2025-08-10 17:35:05] ✅ Analysis successful - data saved to session
[2025-08-10 17:41:45] === Generate Analysis View Called ===
[2025-08-10 17:41:45] Request method: POST
[2025-08-10 17:41:45] Form data received:
[2025-08-10 17:41:45]   Instrument: NIFTY
[2025-08-10 17:41:45]   Calculation Type: Weekly
[2025-08-10 17:41:45]   Expiry: 14-Aug-2025
[2025-08-10 17:41:45] Calling utils.generate_analysis()...
[2025-08-10 17:41:45] UTILS: === generate_analysis() called ===
[2025-08-10 17:41:45] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 17:41:45] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 17:41:45] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 17:41:45] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 17:41:47] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 17:41:47] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 17:41:47] UTILS: Finding suitable hedges...
[2025-08-10 17:41:48] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 17:41:48] UTILS: Generated files: summary_dbfaa73929694dd7b0b506900dd47b5f.png, static/payoff_d59801ce671543f19f08f126d0ed3af2.png
[2025-08-10 17:41:48] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-10 17:41:48] ✅ Analysis successful - data saved to session
[2025-08-10 18:02:28] === Generate Analysis View Called ===
[2025-08-10 18:02:28] Request method: POST
[2025-08-10 18:02:28] Form data received:
[2025-08-10 18:02:28]   Instrument: NIFTY
[2025-08-10 18:02:28]   Calculation Type: Weekly
[2025-08-10 18:02:28]   Expiry: 14-Aug-2025
[2025-08-10 18:02:28] Calling utils.generate_analysis()...
[2025-08-10 18:02:28] UTILS: === generate_analysis() called ===
[2025-08-10 18:02:28] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:02:28] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:02:28] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:02:29] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 18:02:31] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:02:31] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 18:02:31] UTILS: Finding suitable hedges...
[2025-08-10 18:02:32] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 18:02:32] UTILS: Generated files: summary_a41c5efbfdc541299b4e3cea8d080527.png, static/payoff_23aa8ef32d824013a5e2d14594ea9480.png
[2025-08-10 18:02:32] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-10 18:02:32] ✅ Analysis successful - data saved to session
[2025-08-10 18:11:04] === Generate Analysis View Called ===
[2025-08-10 18:11:04] Request method: POST
[2025-08-10 18:11:04] Form data received:
[2025-08-10 18:11:04]   Instrument: NIFTY
[2025-08-10 18:11:04]   Calculation Type: Weekly
[2025-08-10 18:11:04]   Expiry: 14-Aug-2025
[2025-08-10 18:11:04] Calling utils.generate_analysis()...
[2025-08-10 18:11:04] UTILS: === generate_analysis() called ===
[2025-08-10 18:11:04] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:11:04] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:11:04] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:11:05] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-10 18:11:07] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:11:07] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-10 18:11:07] ❌ Exception occurred: Error generating analysis: 'Net Premium'
[2025-08-10 18:11:07] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/indexes/base.py", line 3790, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 152, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 181, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7080, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Net Premium'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 772, in generate_analysis
    footer_text = f"Hedged Strategy: Net Premium ₹{first_row['Net Premium']:.2f} (Sell: ₹{first_row['Combined Premium']:.2f} - Hedge: ₹{first_row['CE Hedge Price'] + first_row['PE Hedge Price']:.2f})"
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/series.py", line 1040, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/series.py", line 1156, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Library/Python/3.9/lib/python/site-packages/pandas/core/indexes/base.py", line 3797, in get_loc
    raise KeyError(key) from err
KeyError: 'Net Premium'

[2025-08-10 18:15:05] UTILS: === generate_analysis() called ===
[2025-08-10 18:15:05] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:15:05] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:15:05] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:15:06] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 18:15:08] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:15:08] UTILS: 📊 Using zone-based strike selection
[2025-08-10 18:15:08] UTILS: 📊 Zone-based strikes:
[2025-08-10 18:15:08] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 18:15:08] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 18:19:52] === Generate Analysis View Called ===
[2025-08-10 18:19:52] Request method: POST
[2025-08-10 18:19:52] Form data received:
[2025-08-10 18:19:52]   Instrument: NIFTY
[2025-08-10 18:19:52]   Calculation Type: Weekly
[2025-08-10 18:19:52]   Expiry: 14-Aug-2025
[2025-08-10 18:19:52] Calling utils.generate_analysis()...
[2025-08-10 18:19:52] UTILS: === generate_analysis() called ===
[2025-08-10 18:19:52] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:19:52] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:19:52] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:19:53] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 18:19:55] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:19:55] UTILS: 📊 Using zone-based strike selection
[2025-08-10 18:19:55] UTILS: 📊 Zone-based strikes:
[2025-08-10 18:19:55] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 18:19:55] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 18:19:55] ❌ Exception occurred: Error generating analysis: 'Net Premium'
[2025-08-10 18:19:55] Traceback: Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Net Premium'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/views.py", line 65, in generate_and_show_analysis
    analysis_data, status = utils.generate_analysis(instrument, calc_type, expiry)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/analyzer/utils.py", line 772, in generate_analysis
    footer_text = f"Hedged Strategy: Net Premium ₹{first_row['Net Premium']:.2f} (Sell: ₹{first_row['Combined Premium']:.2f} - Hedge: ₹{first_row['CE Hedge Price'] + first_row['PE Hedge Price']:.2f})"
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1130, in __getitem__
    return self._get_value(key)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/series.py", line 1246, in _get_value
    loc = self.index.get_loc(label)
  File "/Users/maniraja/Desktop/Mani/NIFTY UI/fifto-analyzer/.venv/lib/python3.9/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Net Premium'

[2025-08-10 18:24:55] UTILS: === generate_analysis() called ===
[2025-08-10 18:24:55] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:24:55] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:24:55] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:24:56] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 18:24:58] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:24:58] UTILS: 📊 Using zone-based strike selection
[2025-08-10 18:24:58] UTILS: 📊 Zone-based strikes:
[2025-08-10 18:24:58] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 18:24:58] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 18:24:58] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 18:24:58] UTILS: Generated files: summary_966d822617984cff83a090c9461eb9c2.png, static/payoff_990da8135e83480e9b79a90fe1547f3c.png
[2025-08-10 18:27:28] === Generate Analysis View Called ===
[2025-08-10 18:27:28] Request method: POST
[2025-08-10 18:27:28] Form data received:
[2025-08-10 18:27:28]   Instrument: NIFTY
[2025-08-10 18:27:28]   Calculation Type: Weekly
[2025-08-10 18:27:28]   Expiry: 14-Aug-2025
[2025-08-10 18:27:28] Calling utils.generate_analysis()...
[2025-08-10 18:27:28] UTILS: === generate_analysis() called ===
[2025-08-10 18:27:28] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 18:27:28] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 18:27:28] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 18:27:29] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 18:27:31] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 18:27:31] UTILS: 📊 Using zone-based strike selection
[2025-08-10 18:27:31] UTILS: 📊 Zone-based strikes:
[2025-08-10 18:27:31] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 18:27:31] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 18:27:31] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 18:27:31] UTILS: Generated files: summary_0be5ab28929344b2ba55cd01a08b2632.png, static/payoff_24d9000c6e3043b2adeabeb90dcb379b.png
[2025-08-10 18:27:31] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 18:27:31] ✅ Analysis successful - data saved to session
[2025-08-10 19:33:26] === Generate Analysis View Called ===
[2025-08-10 19:33:26] Request method: POST
[2025-08-10 19:33:26] Form data received:
[2025-08-10 19:33:26]   Instrument: NIFTY
[2025-08-10 19:33:26]   Calculation Type: Weekly
[2025-08-10 19:33:26]   Expiry: 14-Aug-2025
[2025-08-10 19:33:26] Calling utils.generate_analysis()...
[2025-08-10 19:33:26] UTILS: === generate_analysis() called ===
[2025-08-10 19:33:26] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 19:33:26] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 19:33:26] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 19:33:27] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 19:33:29] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 19:33:29] UTILS: 📊 Using zone-based strike selection
[2025-08-10 19:33:29] UTILS: 📊 Zone-based strikes:
[2025-08-10 19:33:29] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 19:33:29] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 19:33:30] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 19:33:30] UTILS: Generated files: summary_05569edd71e1402e984048ae8511beb6.png, static/payoff_112b4545562d4f78b5dd79631bdc506b.png
[2025-08-10 19:33:30] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 19:33:30] ✅ Analysis successful - data saved to session
[2025-08-10 21:15:06] === Generate Analysis View Called ===
[2025-08-10 21:15:06] Request method: POST
[2025-08-10 21:15:06] Form data received:
[2025-08-10 21:15:06]   Instrument: NIFTY
[2025-08-10 21:15:06]   Calculation Type: Weekly
[2025-08-10 21:15:06]   Expiry: 14-Aug-2025
[2025-08-10 21:15:06] Calling utils.generate_analysis()...
[2025-08-10 21:15:06] UTILS: === generate_analysis() called ===
[2025-08-10 21:15:06] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-10 21:15:06] UTILS: Using ticker symbol: ^NSEI
[2025-08-10 21:15:06] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-10 21:15:06] UTILS: ✅ Zones calculated - Supply: ₹24840.69, Demand: ₹24351.41
[2025-08-10 21:15:08] UTILS: 📊 Real API data - CE: 87, PE: 87 strikes
[2025-08-10 21:15:08] UTILS: 📊 Using zone-based strike selection
[2025-08-10 21:15:08] UTILS: 📊 Zone-based strikes:
[2025-08-10 21:15:08] UTILS:    CE strikes (from supply ₹24840.69): [24850, 24900, 24950]
[2025-08-10 21:15:08] UTILS:    PE strikes (from demand ₹24351.41): [24350, 24300, 24250]
[2025-08-10 21:15:09] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-10 21:15:09] UTILS: Generated files: summary_8ffd18a0f8f1435a97c37681ebfa3927.png, static/payoff_b479defd2e5d4ca5a3c6650be3c143ff.png
[2025-08-10 21:15:09] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24841, Demand: ₹24351)
[2025-08-10 21:15:09] ✅ Analysis successful - data saved to session
[2025-08-11 09:39:04] === Generate Analysis View Called ===
[2025-08-11 09:39:04] Request method: POST
[2025-08-11 09:39:04] Form data received:
[2025-08-11 09:39:04]   Instrument: NIFTY
[2025-08-11 09:39:04]   Calculation Type: Weekly
[2025-08-11 09:39:04]   Expiry: 14-Aug-2025
[2025-08-11 09:39:04] Calling utils.generate_analysis()...
[2025-08-11 09:39:04] UTILS: === generate_analysis() called ===
[2025-08-11 09:39:04] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 09:39:04] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 09:39:04] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 09:39:04] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-11 09:39:06] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 09:39:06] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-11 09:39:06] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 09:39:06] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24450    105.65      24400    118.35          ₹13450
1   Mid Reward      24500     85.25      24350     95.80          ₹10850
2   Low Reward      24550     67.80      24300     77.50           ₹8700
[2025-08-11 09:39:06] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 09:39:06] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 09:39:07] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 09:39:07] UTILS: Generated files: summary_7e3e43f57d834df38ac682f1638064cc.png, static/payoff_25b600368008466ca0aba709901f359c.png
[2025-08-11 09:39:07] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-11 09:39:07] ✅ Analysis successful - data saved to session
[2025-08-11 09:39:32] === Generate Analysis View Called ===
[2025-08-11 09:39:32] Request method: POST
[2025-08-11 09:39:32] Form data received:
[2025-08-11 09:39:32]   Instrument: NIFTY
[2025-08-11 09:39:32]   Calculation Type: Weekly
[2025-08-11 09:39:32]   Expiry: 14-Aug-2025
[2025-08-11 09:39:32] Calling utils.generate_analysis()...
[2025-08-11 09:39:32] UTILS: === generate_analysis() called ===
[2025-08-11 09:39:32] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 09:39:32] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 09:39:32] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 09:39:32] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-11 09:39:34] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 09:39:34] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-11 09:39:34] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 09:39:34] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24450    105.65      24400    118.35          ₹13450
1   Mid Reward      24500     85.25      24350     95.80          ₹10850
2   Low Reward      24550     67.80      24300     77.50           ₹8700
[2025-08-11 09:39:34] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 09:39:34] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 09:39:35] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 09:39:35] UTILS: Generated files: summary_7373394ad8f349a797b962b7a3882e0f.png, static/payoff_47d313467bf645bea84a17f6c7dcc0b1.png
[2025-08-11 09:39:35] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-11 09:39:35] ✅ Analysis successful - data saved to session
[2025-08-11 09:56:38] === Generate Analysis View Called ===
[2025-08-11 09:56:38] Request method: POST
[2025-08-11 09:56:38] Form data received:
[2025-08-11 09:56:38]   Instrument: NIFTY
[2025-08-11 09:56:38]   Calculation Type: Weekly
[2025-08-11 09:56:38]   Expiry: 14-Aug-2025
[2025-08-11 09:56:38] Calling utils.generate_analysis()...
[2025-08-11 09:56:38] UTILS: === generate_analysis() called ===
[2025-08-11 09:56:38] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 09:56:38] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 09:56:38] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 09:56:39] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-11 09:56:40] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 09:56:40] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-11 09:56:40] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 09:56:40] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24400    139.80      24350     87.65          ₹13650
1   Mid Reward      24450    114.00      24300     70.00          ₹11050
2   Low Reward      24500     91.95      24250     56.05           ₹8900
[2025-08-11 09:56:40] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 09:56:40] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 09:56:41] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 09:56:41] UTILS: Generated files: summary_9bffa8ca7eb34ce0b4ba71d13ec33fce.png, static/payoff_8895e0e67fe54463b7e5f4f8edaf81ea.png
[2025-08-11 09:56:41] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with price-based strike selection
[2025-08-11 09:56:41] ✅ Analysis successful - data saved to session
[2025-08-11 09:59:19] UTILS: === generate_analysis() called ===
[2025-08-11 09:59:19] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 09:59:19] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 09:59:19] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 09:59:20] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-11 09:59:22] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 09:59:22] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-11 09:59:22] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 09:59:22] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24450       0.0      24400       0.0              ₹0
1   Mid Reward      24500       0.0      24350       0.0              ₹0
2   Low Reward      24550       0.0      24300       0.0              ₹0
[2025-08-11 09:59:22] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 09:59:22] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 09:59:22] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 09:59:22] UTILS: Generated files: summary_3e2288ef60a5414d999e024262d0868e.png, static/payoff_18e8ed30421749c1a4cacddfc09aa942.png
[2025-08-11 09:59:22] UTILS: === generate_analysis() called ===
[2025-08-11 09:59:22] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 09:59:22] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-11 09:59:22] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 09:59:23] UTILS: ❌ Failed to calculate zones, using fallback method
[2025-08-11 09:59:25] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 09:59:25] UTILS: 📊 Using fallback current price-based strike selection
[2025-08-11 09:59:25] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 09:59:25] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      55200       0.0      55100       0.0              ₹0
1   Mid Reward      55300       0.0      55000       0.0              ₹0
2   Low Reward      55400       0.0      54900       0.0              ₹0
[2025-08-11 09:59:25] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 09:59:25] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 09:59:25] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-11 09:59:25] UTILS: Generated files: summary_365b8dc76e394d6193037b00026c88fd.png, static/payoff_3e11d16815664aec91ee0e82932d3aa7.png
[2025-08-11 10:01:42] UTILS: === generate_analysis() called ===
[2025-08-11 10:01:42] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:01:42] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:01:42] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:01:44] UTILS: ✅ Zones calculated - Supply: ₹24850, Demand: ₹23950
[2025-08-11 10:01:46] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:01:46] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:01:46] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:01:46] UTILS:    CE strikes (from supply ₹24850): [24850, 24900, 24950]
[2025-08-11 10:01:46] UTILS:    PE strikes (from demand ₹23950): [23950, 23900, 23850]
[2025-08-11 10:01:46] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:01:46] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850       0.0      23950       0.0              ₹0
1   Mid Reward      24900       0.0      23900       0.0              ₹0
2   Low Reward      24950       0.0      23850       0.0              ₹0
[2025-08-11 10:01:46] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:01:46] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:01:47] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:01:47] UTILS: Generated files: summary_50baeca5e3b14ba6ae47ea0aef19cd4f.png, static/payoff_9c810e6154824417a7c4dbf428ba7ee0.png
[2025-08-11 10:01:47] UTILS: === generate_analysis() called ===
[2025-08-11 10:01:47] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:01:47] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-11 10:01:47] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:01:48] UTILS: ✅ Zones calculated - Supply: ₹56300, Demand: ₹53900
[2025-08-11 10:01:50] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:01:50] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:01:50] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:01:50] UTILS:    CE strikes (from supply ₹56300): [56300, 56400, 56500]
[2025-08-11 10:01:50] UTILS:    PE strikes (from demand ₹53900): [53900, 53800, 53700]
[2025-08-11 10:01:50] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:01:50] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      56300       0.0      53900       0.0              ₹0
1   Mid Reward      56400       0.0      53800       0.0              ₹0
2   Low Reward      56500       0.0      53700       0.0              ₹0
[2025-08-11 10:01:50] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:01:50] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:01:51] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-11 10:01:51] UTILS: Generated files: summary_d30d939270454740aba94aedb2fff97d.png, static/payoff_476efe9f7c054d419646a15b023afb08.png
[2025-08-11 10:06:05] UTILS: === generate_analysis() called ===
[2025-08-11 10:06:05] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:06:05] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:06:05] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:06:07] UTILS: ✅ Zones calculated - Supply: ₹24850, Demand: ₹23950
[2025-08-11 10:06:10] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:06:10] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:06:10] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:06:10] UTILS:    CE strikes (from supply ₹24850): [24850, 24900, 24950]
[2025-08-11 10:06:10] UTILS:    PE strikes (from demand ₹23950): [23950, 23900, 23850]
[2025-08-11 10:06:10] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:06:10] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850       0.0      23950       0.0              ₹0
1   Mid Reward      24900       0.0      23900       0.0              ₹0
2   Low Reward      24950       0.0      23850       0.0              ₹0
[2025-08-11 10:06:10] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:06:10] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:06:11] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:06:11] UTILS: Generated files: summary_6cc6e88e931442bab4394ae03696c32f.png, static/payoff_0b5decefa06e411f9512dc8b067937aa.png
[2025-08-11 10:06:11] UTILS: === generate_analysis() called ===
[2025-08-11 10:06:11] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:06:11] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-11 10:06:11] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:06:13] UTILS: ✅ Zones calculated - Supply: ₹56400, Demand: ₹54000
[2025-08-11 10:06:15] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:06:15] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:06:15] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:06:15] UTILS:    CE strikes (from supply ₹56400): [56400, 56500, 56600]
[2025-08-11 10:06:15] UTILS:    PE strikes (from demand ₹54000): [54000, 53900, 53800]
[2025-08-11 10:06:15] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:06:15] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      56400       0.0      54000       0.0              ₹0
1   Mid Reward      56500       0.0      53900       0.0              ₹0
2   Low Reward      56600       0.0      53800       0.0              ₹0
[2025-08-11 10:06:15] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:06:15] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:06:17] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-11 10:06:17] UTILS: Generated files: summary_584b66de82f84e53946696934aa94816.png, static/payoff_cee82ac6b9dc4596a95ec1bdee71f9b4.png
[2025-08-11 10:10:16] === Generate Analysis View Called ===
[2025-08-11 10:10:16] Request method: POST
[2025-08-11 10:10:16] Form data received:
[2025-08-11 10:10:16]   Instrument: NIFTY
[2025-08-11 10:10:16]   Calculation Type: Weekly
[2025-08-11 10:10:16]   Expiry: 14-Aug-2025
[2025-08-11 10:10:16] Calling utils.generate_analysis()...
[2025-08-11 10:10:16] UTILS: === generate_analysis() called ===
[2025-08-11 10:10:16] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 10:10:16] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:10:16] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:10:18] UTILS: ✅ Zones calculated - Supply: ₹24850, Demand: ₹23950
[2025-08-11 10:10:20] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 10:10:20] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:10:20] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:10:20] UTILS:    CE strikes (from supply ₹24850): [24850, 24900, 24950]
[2025-08-11 10:10:20] UTILS:    PE strikes (from demand ₹23950): [23950, 23900, 23850]
[2025-08-11 10:10:20] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:10:20] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850     15.55      23950     14.55           ₹1800
1   Mid Reward      24900     12.00      23900     11.80           ₹1450
2   Low Reward      24950      9.45      23850      9.75           ₹1150
[2025-08-11 10:10:20] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 10:10:20] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 10:10:21] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:10:21] UTILS: Generated files: summary_d34cf497fcfc4ccaa8b11d1ac8a4b92f.png, static/payoff_a96dfde7f7264564b4373f3b7f1b2022.png
[2025-08-11 10:10:21] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24850, Demand: ₹23950)
[2025-08-11 10:10:21] ✅ Analysis successful - data saved to session
[2025-08-11 10:21:46] UTILS: === generate_analysis() called ===
[2025-08-11 10:21:46] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:21:46] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:21:46] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:21:46] UTILS: ✅ Zones calculated - Supply: ₹24850, Demand: ₹23950
[2025-08-11 10:21:48] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:21:48] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:21:48] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:21:48] UTILS:    CE strikes (from supply ₹24850): [24850, 24900, 24950]
[2025-08-11 10:21:48] UTILS:    PE strikes (from demand ₹23950): [23950, 23900, 23850]
[2025-08-11 10:21:48] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:21:48] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24850       0.0      23950       0.0              ₹0
1   Mid Reward      24900       0.0      23900       0.0              ₹0
2   Low Reward      24950       0.0      23850       0.0              ₹0
[2025-08-11 10:21:48] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:21:48] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:21:49] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:21:49] UTILS: Generated files: summary_64b69cc2f3e34533ae7867fc77a9662e.png, static/payoff_9308d05177504f3d942aa38010cd939d.png
[2025-08-11 10:33:12] UTILS: === generate_analysis() called ===
[2025-08-11 10:33:12] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:33:12] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:33:12] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:33:12] UTILS: ✅ Zones calculated - Supply: ₹25250, Demand: ₹24350
[2025-08-11 10:33:14] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:33:14] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:33:14] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:33:14] UTILS:    CE strikes (from supply ₹25250): [25250, 25300, 25350]
[2025-08-11 10:33:14] UTILS:    PE strikes (from demand ₹24350): [24350, 24300, 24250]
[2025-08-11 10:33:14] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:33:14] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      25250       0.0      24350       0.0              ₹0
1   Mid Reward      25300       0.0      24300       0.0              ₹0
2   Low Reward      25350       0.0      24250       0.0              ₹0
[2025-08-11 10:33:14] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:33:14] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:33:15] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:33:15] UTILS: Generated files: summary_9fd586fbd0a345dc820f252d6ae18ea4.png, static/payoff_43ed7713978a4f799b728bec9a87ba6c.png
[2025-08-11 10:45:04] UTILS: === generate_analysis() called ===
[2025-08-11 10:45:04] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 10:45:04] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:45:04] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:45:05] UTILS: ✅ Zones calculated - Supply: ₹24900, Demand: ₹24000
[2025-08-11 10:45:06] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 10:45:06] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:45:06] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:45:06] UTILS:    CE strikes (from supply ₹24900): [24900, 24950, 25000]
[2025-08-11 10:45:06] UTILS:    PE strikes (from demand ₹24000): [24000, 23950, 23900]
[2025-08-11 10:45:06] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:45:06] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24900       0.0      24000       0.0              ₹0
1   Mid Reward      24950       0.0      23950       0.0              ₹0
2   Low Reward      25000       0.0      23900       0.0              ₹0
[2025-08-11 10:45:06] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 10:45:06] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 10:45:07] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:45:07] UTILS: Generated files: summary_0dd55c6162e3472ab26cefd77ae8822f.png, static/payoff_030b8df0f1494eabba844a6497e5be11.png
[2025-08-11 10:47:21] === Generate Analysis View Called ===
[2025-08-11 10:47:21] Request method: POST
[2025-08-11 10:47:21] Form data received:
[2025-08-11 10:47:21]   Instrument: NIFTY
[2025-08-11 10:47:21]   Calculation Type: Weekly
[2025-08-11 10:47:21]   Expiry: 14-Aug-2025
[2025-08-11 10:47:21] Calling utils.generate_analysis()...
[2025-08-11 10:47:21] UTILS: === generate_analysis() called ===
[2025-08-11 10:47:21] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 10:47:21] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 10:47:21] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 10:47:22] UTILS: ✅ Zones calculated - Supply: ₹24900, Demand: ₹24000
[2025-08-11 10:47:24] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 10:47:24] UTILS: 📊 Using zone-based strike selection
[2025-08-11 10:47:24] UTILS: 📊 Zone-based strikes:
[2025-08-11 10:47:24] UTILS:    CE strikes (from supply ₹24900): [24900, 24950, 25000]
[2025-08-11 10:47:24] UTILS:    PE strikes (from demand ₹24000): [24000, 23950, 23900]
[2025-08-11 10:47:24] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 10:47:24] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24900     13.35      24000     14.35           ₹1650
1   Mid Reward      24950     10.40      23950     11.60           ₹1300
2   Low Reward      25000      8.15      23900      9.45           ₹1050
[2025-08-11 10:47:24] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 10:47:24] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 10:47:25] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 10:47:25] UTILS: Generated files: summary_f5813da93a6742e194c015e3c37f50dc.png, static/payoff_43b6b2b2a9cf47daaf6b015f5e29f5d8.png
[2025-08-11 10:47:25] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24900, Demand: ₹24000)
[2025-08-11 10:47:25] ✅ Analysis successful - data saved to session
[2025-08-11 11:00:27] UTILS: === generate_analysis() called ===
[2025-08-11 11:00:27] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=30-Jan-2025
[2025-08-11 11:00:27] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 11:00:27] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 11:00:27] UTILS: ✅ Zones calculated - Supply: ₹24900, Demand: ₹24000
[2025-08-11 11:00:29] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 11:00:29] UTILS: 📊 Using zone-based strike selection
[2025-08-11 11:00:29] UTILS: 📊 Zone-based strikes:
[2025-08-11 11:00:29] UTILS:    CE strikes (from supply ₹24900): [24900, 24950, 25000]
[2025-08-11 11:00:29] UTILS:    PE strikes (from demand ₹24000): [24000, 23950, 23900]
[2025-08-11 11:00:29] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 11:00:29] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24900       0.0      24000       0.0              ₹0
1   Mid Reward      24950       0.0      23950       0.0              ₹0
2   Low Reward      25000       0.0      23900       0.0              ₹0
[2025-08-11 11:00:29] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 11:00:29] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 11:00:29] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 11:00:29] UTILS: Generated files: summary_4a868a755133485780e399d497916aa2.png, static/payoff_386e557319a346ff9af3c1c727793f45.png
[2025-08-11 13:21:11] === Generate Analysis View Called ===
[2025-08-11 13:21:11] Request method: POST
[2025-08-11 13:21:11] Form data received:
[2025-08-11 13:21:11]   Instrument: NIFTY
[2025-08-11 13:21:11]   Calculation Type: Weekly
[2025-08-11 13:21:11]   Expiry: None
[2025-08-11 13:21:11] Calling utils.generate_analysis()...
[2025-08-11 13:21:11] UTILS: === generate_analysis() called ===
[2025-08-11 13:21:11] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=None
[2025-08-11 13:21:11] UTILS: ❌ Missing required parameters
[2025-08-11 13:21:11] Analysis result: <class 'NoneType'>, Status: Please select valid inputs.
[2025-08-11 13:21:11] ❌ Analysis failed: Please select valid inputs.
[2025-08-11 13:52:00] UTILS: === generate_analysis() called ===
[2025-08-11 13:52:00] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 13:52:00] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 13:52:00] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 13:52:00] UTILS: ✅ Zones calculated - Supply: ₹24950, Demand: ₹24350
[2025-08-11 13:52:00] UTILS: === generate_analysis() called ===
[2025-08-11 13:52:00] UTILS: Parameters: instrument=BANKNIFTY, calc_type=Monthly, expiry=25-Sep-2025
[2025-08-11 13:52:00] UTILS: Using ticker symbol: ^NSEBANK
[2025-08-11 13:52:00] UTILS: 📊 Calculating Monthly supply/demand zones...
[2025-08-11 13:52:01] UTILS: ✅ Zones calculated - Supply: ₹55700, Demand: ₹54600
[2025-08-11 13:52:03] UTILS: 📊 Real API data - CE: 0, PE: 0 strikes
[2025-08-11 13:52:03] UTILS: 📊 Using zone-based strike selection
[2025-08-11 13:52:03] UTILS: 📊 Zone-based strikes:
[2025-08-11 13:52:03] UTILS:    CE strikes (from supply ₹55700): [55700, 55800, 55900]
[2025-08-11 13:52:03] UTILS:    PE strikes (from demand ₹54600): [54600, 54500, 54400]
[2025-08-11 13:52:03] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 13:52:03] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      55700       0.0      54600       0.0              ₹0
1   Mid Reward      55800       0.0      54500       0.0              ₹0
2   Low Reward      55900       0.0      54400       0.0              ₹0
[2025-08-11 13:52:03] UTILS: 📊 CE Prices found: 0 items
[2025-08-11 13:52:03] UTILS: 📊 PE Prices found: 0 items
[2025-08-11 13:52:04] UTILS: ✅ Analysis completed successfully for BANKNIFTY
[2025-08-11 13:52:04] UTILS: Generated files: summary_79df60203e65472cb9b2858c02343507.png, static/payoff_7ac99236804d4706ada693ea14bf588e.png
[2025-08-11 17:11:15] === Generate Analysis View Called ===
[2025-08-11 17:11:15] Request method: POST
[2025-08-11 17:11:15] Form data received:
[2025-08-11 17:11:15]   Instrument: NIFTY
[2025-08-11 17:11:15]   Calculation Type: Weekly
[2025-08-11 17:11:15]   Expiry: 14-Aug-2025
[2025-08-11 17:11:15] Calling utils.generate_analysis()...
[2025-08-11 17:11:15] UTILS: === generate_analysis() called ===
[2025-08-11 17:11:15] UTILS: Parameters: instrument=NIFTY, calc_type=Weekly, expiry=14-Aug-2025
[2025-08-11 17:11:15] UTILS: Using ticker symbol: ^NSEI
[2025-08-11 17:11:15] UTILS: 📊 Calculating Weekly supply/demand zones...
[2025-08-11 17:11:16] UTILS: ✅ Zones calculated - Supply: ₹24602.44, Demand: ₹24140.56
[2025-08-11 17:11:18] UTILS: 📊 Real API data - CE: 91, PE: 91 strikes
[2025-08-11 17:11:18] UTILS: 📊 Using zone-based strike selection
[2025-08-11 17:11:18] UTILS: 📊 Zone-based strikes:
[2025-08-11 17:11:18] UTILS:    CE strikes (from supply ₹24602.44): [24650, 24700, 24750]
[2025-08-11 17:11:18] UTILS:    PE strikes (from demand ₹24140.56): [24100, 24050, 24000]
[2025-08-11 17:11:18] UTILS: 📊 DataFrame created with shape: (3, 8)
[2025-08-11 17:11:18] UTILS: 📊 Display DataFrame: 
         Entry  CE Strike  CE Price  PE Strike  PE Price Target/SL (1:1)
0  High Reward      24650     61.85      24100     11.25           ₹4400
1   Mid Reward      24700     46.15      24050      9.35           ₹3350
2   Low Reward      24750     34.30      24000      8.10           ₹2550
[2025-08-11 17:11:18] UTILS: 📊 CE Prices found: 91 items
[2025-08-11 17:11:18] UTILS: 📊 PE Prices found: 91 items
[2025-08-11 17:11:19] UTILS: ✅ Analysis completed successfully for NIFTY
[2025-08-11 17:11:19] UTILS: Generated files: summary_c1fde2fc5e7a4679b4ba4a87b404a119.png, static/payoff_adf7e6699f0e4d64b408e2d753c161bb.png
[2025-08-11 17:11:19] Analysis result: <class 'dict'>, Status: ✅ Weekly analysis completed with supply/demand zones (Supply: ₹24602, Demand: ₹24141)
[2025-08-11 17:11:19] ✅ Analysis successful - data saved to session
